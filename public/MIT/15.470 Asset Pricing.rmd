---
output: html_document
---
# 15.470 - Asset Pricing{.tabset}

## The Course{.tabset}

### **Overview**

15.470 is structured in two parts: **1)** Fundamental Theory of Asset Pricing (10 Lectures); **2)** Optimal Portfolio Choice(4 Lectures). 

1) The [**first**](https://gabrielvoelcker.netlify.com/mit/Lecture-0_Introduction and Overview.pdf) lecture introduces basic concepts we're going to cover throughout the semester. It starts with a brief **introduction** about what finance is and talks about positive vs normative approach. Then the lecture proceeds to a **course overview**. Next, this talks about the 5 parts of the course: FTAP and Optimal Portfolio Choice in the first half; Static equilibrium models of asset pricing, Asymmetric information and Dynamic modeling in the second half. It then briefly addresses each of the 5 subjects. We proceed to briefly address the course requirements. Lastly we talk about our setting: financial markets in the US. We talk about the financial system, mortgages, difference between stocks, corporate bonds and treasury bonds. We then talk about something very interesting that we will address again in the future: holding period return. Then we address some conventions and examples in the US market. 

2) The second lecture introduces the framework we're going to use. This is divided in 7 moments.

  i) Stylized Facts: we start simple and then construct on it. We're going to use a very basic setting for environment, agents, financial/securities market, market equilibrium and efficiency.
  
  ii) Environment: we have to pay attention to two key elements of finance: **time** and **risk**.
  
  iii) Agents: we assume the economy is populated by K agent. Their resources include: *information*, *endowment* and *production technology*.
  
  iv) Securities Market: what is a **security**? How can we express the payoff of a security? What is the payoff space? What is the payoff matrix? What is the market structure? What is a portfolio? Its cost? Its payoff?

  v) The Economy: all the previous definitions sum up what the economy is. 

  vi) Market Equilibrium: when do the agents settle on an equilibrium? What's the impact of the budget set on this equilibrium? 

  vii) Optimality: How do the agents optimize? 
  
3) The third lecture introduces the very important concept of **arbitrage**. The lecture is divided in four parts. First we review what we've defined the framework for our work is. Then we start to understand what state prices are and how some claims could be state-contingent. We then talk about **Arrow-Debreu** securities and an **Arrow-Debreu Market**, which is a **complete market**. Then we finally enter the topic of the class: **arbitrage**. We're mostly going to work with markets with no arbitrage(no free lunch!). Lastly we talk about the **Fundamental Theorem of Asset Pricing**. We discuss how an asset pricing model is a mapping from a security’s payoff vector d to its price P and how this works under no arbitrage. We then talk about arbitrage to let the concept sink in. And then we finish by defining the FTAP. 

4) The fourth lecture extends on Arbitrage Pricing. We cover some key results that we can derive from the **no arbitrage assumption**. We start from we're stopped last time: FTAP. We define some basic concepts such as *monotonicity* and *linearity*. Then we review FTAP. The lecture then proceeds to introduce an interesting concept: **Discounted Cash Flow/PV Formula**. This makes money relatable in various periods of time. Then the lecture advances to **Market Completeness** and **Unique State Prices**. Next, **Riskless Security** and **Risk Neutral Measure**.

5) This lecture advances further(and for the last time) our discussion on arbitrage pricing. It addresses five topics: i) **Risk-Neutral Measure**: we already dealt with this last time, but we revisit it because we couldn't cover everything. It's interesting to use RNM as a benchmark, and we will be able to use it to understand risk premia in the future. We talk a little about different scenarios for RNM and how it represents normalized state prices. ii) **State Price Density**: we define what state-price density is, how it can be represented and its utility.  iii) **Discount rates / risk premia**: what is the time value of money? That's when discount rates show up. And the risk premia stands for the excess of the riskless interest rate. We talk then about idiosyncratic risk. iv) **SPD/SDF bounds**: Hansen and Jagannathan had the brilliant insight that observed moments of asset prices place strong restrictions on moments of the SDF. This has serious implications for our models, as we will see later. v) **Multiple periods**: The best forecast one can make with limited information is the forecast of the forecast one would make with better information.

6) The sixth lecture deals with **Corporate Finance** and **Fixed Income Applications**. We talk about CF from a neoclassical(not so realistic but a good starting point) point of view. We talk about the NPV of an investment. Also, how can the optimization problem be solved? How do we maximize current market value? We talk about financing decisions(and manage to squeeze a MM theorem in there!). Then we talk about important factors of modeling the term structure, such as understand coupon price, yield to maturity and related issues. We end up with a lot of graphs to visualize the impact of time on interest, inflation. Then we talk about the Vasicek model. 

7) On the 7th lecture we talk about **Option Pricing**. The lecture discusses implications of the no arbitrage framework for derivative securities, especially options. This isn’t just about calculating asset prices. Many interesting economic decision problems involve option-like payoffs. For example: writing re- search papers / hiring job market candidates! I’ll also emphasize some ways in which empirical researchers have used information from derivative markets + no arbitrage conditions to back out model-free measures of (risk-neutral) expectations from financial markets. We address **derivative** securities and then talk about six things: 1) What are **options**; 2) **pricing properties**; 3) **early exercise**; 4) how do we **price options**; 5) Options and Market structure; and 6) Lastly, the lecture addresses interesting applications of options. 

8) On our 8th lecture we talk about **Arbitrage Pricing Theory**(APT). The lecture is divided in: i) **Introduction**: Arbitrage pricing is a theory on relative pricing. It's a very brief introduction. ii) **Beta/Expected Return Decomposition**: we talk about the irrelevance of idiosyncratic risk, expected returns, how to interpret the Beta and its relation to variance decomposition. Then we talk about the securities market line. iii) **Risk Factors and Pricing**: whats the setting we use to determine pricing and risk factors? What is the relation between prices and returns?  iv) **Exact APT**: we then address a bunch of lemmas and theorems regarding the APT, but don't really go deep into the business. We then define a **Factor Model for Returns**. 

9) This time we go deeper into the APT. We talk about: i) **Factors and Diversification**: we start from the Factor Model for Returns we've talked about last class. Then we generalize our *variance decomposition* and talk about f*actor structure in returns*. Then we talk about the importance of *diversification* and the difference: systematic vs idiosyncratic risk. ii) **APT**: we define *asymptotic arbitrage*. Then give a general version of the APT and try to understand its logic. Once understood, we advance to the implications of the APT, although it can't be applicable to all securities. iii) **Testing the Theory**: we use time-series and cross-sectional approaches to test the APT. Then we make some practical considerations about it. iv) **Some evidence**: we talk a little about the cross-sectional asset pricing literature. We go through examples of stuff that remain unexplained and average returns.

10) The 10th lecture, and last about FTAP, talks about some empirics of cross-sectional asset pricing and expected utility. The lecture is divided in 4 parts: i) **Testing APT/CAPM Theory**: we return to the conversation of testing the APT and how we use *time-series* and *cross-sectional* models to do that. Then we talk about practical considerations of testing the APT. ii) **Some evidence**: we talk about the massive literature that derived from Fama and French's work and some factors that remain unexplained. iii) **Expected Utility Theory**: it looks like we're borrowing Micro's textbook now! The lecture advances to explain how we establish preferences and how we try to model them with a Utility function. iv) **Risk Aversion**: we define what we call risk aversion and characterize risk-averse agents. 

11) The first lecture of the second part of the course addresses: **Expect Utility**. We pick up from we're we stopped and talk about what are the criticisms of it. Then we talk about measures of risk aversion(such as Arrow-Pratt measure). Lastly, we talk about comparing risk aversion. 



### **1) Introduction and Overview**

The [**first**](15470_L1.pdf) lecture introduces the concepts we're gonna work throughout the semester and gives some overview in order to wake our curiosity on the subject. The lecture is divided in 4 moments:

#### 1) Introduction

The lecture starts by introducing some basic concepts of [**Finance**](https://en.wikipedia.org/wiki/Finance), after all, it's a finance course. Finance is about *financial arrangements* and *transactions* that improve economic efficiency. Some examples are:

- Payment and settlement/clearing (facilitating trade of goods and services) Allocate resources across time, location and economic activities.

- Amass capital for large scale investments.

- Tools and services to share and manage risk.

- Price discovery, to coordinate diverse economic decisions.

- Market mechanism to resolve information, governance and incentive issues Tools and channels for macroeconomic policy implementations.

Our study is concerned with understanding **what are the functions of financial activities and their underlying mechanisms** and how can we improve their efficiency. Then the issue of **no arbitrage** is briefly addressed. Using the NA setting we can allow for model-free statements about how financial market participants view economic tradeoffs $\implies$ data-driven welfare and investment criteria.

The **objectives of 15.470** are:

- To develop a conceptual framework for the study of finance.

- To cover the basis of the neoclassical(frictionless) theory of finance.

- To introduce the key ideas, principles, methods and many of the basic results in modern finance.

**- Positive vs Normative Approach**: when doing science, we can have two approaches:

**Positive Approach**: minimal restrictions of no arbitrage. Somewhat unique to finance due to wealth of data. Focus of **H1**.

**Normative Approach**: Micro-founded model of portfolio choice $\implies$ Decision rules $\implies$ equilibrium restrictions on prices. Focus of **H2**.

```{r, echo=FALSE}
library(png)
library(grid)
setwd("~/Dropbox/R/Site-Gabriel/public/MIT")
img <- readPNG("3.png")
grid.raster(img)
```

Depending on the part of the course we are in, how much we are positive and normative varies. 

#### 2) Course Overview

The course tackles five main topics:

i) Fundamental Theory of Asset Pricing(with a brief application to corporate finance): deals with: **a)** Arrow-Debreu state-space framework; **b)** Arbitrage; **c)** FTAP; **d)** Market completeness; **e)** state price density and risk neutral measure; **f)** Application of NA (options and derivatives; neoclassical corporate finance); **g)** Arbitrage Pricing Theory (APT).

ii) Optimal portfolio choice: **a)** Preference theory; **b)** optimal consumption/portfolio choices; **c)** Risk aversion and portfolio choices; **d)** Portfolio choices in complete markets; **e)** Stochastic dominance; **f)** Portfolio separation theorems; **g)** Mean-variance analysis.

iii) Static Equilibrium models of asset pricing: **a)** Market equilibrium; **b)** The Capital Asset Pricing Model (CAPM); **c)** The Consumption-based Capital Asset Pricing Model (C-CAPM);

iv) Asymmetric information: **a)** Asymmetric information in financial markets, Grossman-Stiglitz model; **b)** No-trade theorem; **c)** Rational expectations and market efficiency; **d)** Market micro-structure, Kyle model, Glosten-Milgrom model.

v) Dynamic modeling: **a)** Dynamic state-space framework, FTAP; **b)** Arbitrage asset pricing in a dynamic model; **c)** Dynamic portfolio choice; **d)** Dynamic equilibrium models with complete markets, CCAPM; **e)** Dynamic equilibrium models with incomplete markets.

The first two are taught by LS in the 1st part of the course. The last three by LK in the 2nd part.

**Focus**: demand for and valuation of risky assets. Ignores many realistic frictions affecting supply of risky assets: corporate finance. Material we **don't cover**: financial frictions; capital structure; moral hazard; banking and liquidity. Since this is a practitioner's field, the theory is beautiful but putting it to work is the hard part. Lastly: **notation changes**!

#### 3) Course Requirements

- Problem sets(10\%) + midterm(30\%) + finals(60\%).

#### 4) Financial Markets in the US

We're going to study the world's biggest financial market: the american one. Before we deal with its intricacies we're going to lay some basic foundations about it. 

**Real Assets**: are the type of assets that contribute directly to the productive capacity of the economy. ex: land, natural resources, buildings, human capital, machines.

- Input: resources today (e.g., hire people / buy machines / build a factory).

- Output: resources tomorrow (e.g., factory/store/product $\rightarrow$ \$\$).
    
[**Financial Assets**](https://en.wikipedia.org/wiki/Financial_asset): **Claims to the returns generated by real assets**. Allocate the profits (returns) and risks to various market participants and investors. Contribute **indirectly** to productive capacity of the economy.
    
The clearest example of a Real Asset vs Financial Asset: House vs Mortgage. We can also classify the types of financial assets. How? By:

- Type of claim: 

1) [**Bonds**](https://en.wikipedia.org/wiki/Bond_(finance))/Fixed income securities: fixed dollar amount claim (no uncertainty!).

2) Equities/[**Stocks**](https://en.wikipedia.org/wiki/Stock): is a part of a corporation that an investor can buy. Its return depends on firm performance. Can be classified as [**preferred**](https://en.wikipedia.org/wiki/Preferred_stock) or [**common**](https://en.wikipedia.org/wiki/Common_stock).

3) [**Derivative**](https://en.wikipedia.org/wiki/Derivative_(finance)): is a contract that derives its value from the performance of an underlying entity. Ex: options, futures, forward swaps.

- Type of maturity: 

1) Money market: maturity < 1 year $\rightarrow$ debt instruments $\implies$ short maturity.

2) Capital market: maturity > 1 year $\rightarrow$ debt instruments and equity $\implies$ long maturity.

3) Derivatives markets: **maturities vary** a lot (from weeks to decades).

We can talk about some key differences between stocks, corporate bonds and treasury bonds, but that'll be treated properly later. To get some perspective about the financial system:

```{r, echo=FALSE}
library(png)
library(grid)
setwd("~/Dropbox/R/Site-Gabriel/public/MIT")
img <- readPNG("31.png")
grid.raster(img)
```

On a financial system we have some key players, such as: 1) households; 2) firms; 3) financial intermediaries. Each one plays its own part on the big picture above.

A very important concept is **how money relates to other periods in the future** and across the various possible states in the future. We tend to model the returns of a financial asset as:

\[ \underbrace{R_{t+1}}_\text{gross return} = \frac{\text{Payoff at t + 1}}{\text{Price at t}} \equiv \frac{X_{t+1}}{P_t} = \underbrace{\frac{D_{t+1}}{P_t}}_\text{future direct cash flow(dividend yield)} + \underbrace{\frac{P_{t+1}}{P_t}}_\text{liquidation value(capital gain)} = 1 + \underbrace{r_{t+1}}_\text{net return} \]

Decomposing the above equation, we have that it represents the change in value of an initial investment. The cash flow ($X_{t+1}$) will be received regardless of the investor's actions. This investor can choose to liquidate his position at the market price $X_{t+1}$ or reinvest cash flows at market price $P_{t+1}$. We are assuming frictionless market $\implies$ linearity in returns. We should also consider the existence of **compound returns**: the return from to *t* to *t + k* of an initial investment where cash flows are reinvested $\equiv \prod_{j=1}^k R_{t+j}$. 

As said earlier, this is a practioner's field, so the lecture proceeds to look at some real-life examples of returns in the US market. To evaluate them, we have to consider some summary statistics:

- **Average (arithmetic) returns**: $\frac{1}{T}\sum_{t=1}^T R_t$.

- **Average (geometric) returns**: $[\prod_{t=1}^T R_t]^{1/T}$ = exp($\frac{1}{T}\sum_{t=1}^T log R_t$), per-period return associated with buying and holding the asset over the entire sample period.

- **Sample variance**: $\frac{1}{T - 1} \sum_{t=1}^T [R_t - \frac{1}{T}\sum_{j=1}^T R_j]^2$.

- **Standard deviation**: $\sqrt{Variance}$.

- **Higher moments**: skewness/kurtosis.

- **Non-parametric methods**: summarize data with a histogram.

When reporting returns, some issues: it's common use to compute **excess returns**(returns above the risk-free level). Also, report annualized returns. Other important issues: **risk premium**, [**Sharpe ratio**](https://en.wikipedia.org/wiki/Sharpe_ratio). But average returns estimation isn't a precise endeavour. The **standard error** estimates the precision of an estimate. For returns over the Long Term, [**Jensen's Inequality**](https://en.wikipedia.org/wiki/Jensen%27s_inequality) is very important. 

- [**Risk premium**](https://www.investopedia.com/terms/r/riskpremium.asp): is the return in excess of the risk-free rate of return an investment is expected to yield.

- [**Sharpe ratio**](https://en.wikipedia.org/wiki/Sharpe_ratio): is a way to examine the performance of an investment by adjusting for its risk. Measure of expected return per unit risk of the strategy: $\frac{Risk\,premium}{Volatility}$ = $\frac{E[R_{t+1}- R_{f,t+1}]}{Std[R_{t+1} - R_{f,t+1}]}$ 

[**Jensen's Inequality**](https://en.wikipedia.org/wiki/Jensen%27s_inequality) and [**video**](https://www.youtube.com/watch?v=HfCb1K4Nr8M): relates the value of a convex function of an integral to the integral of the convex function. Given its generality, the inequality appears in many forms depending on the context, some of which are presented below. In its simplest form the inequality states that the convex transformation of a mean is less than or equal to the mean applied after convex transformation; it is a simple corollary that the opposite is true of concave transformations.

Then the class presents us with some real-life graphs about the market. The course is devoted to understanding how these graphs work. We use theory but the wealth of data is such that we may have to revisit some concepts. 

### **2) A Basic Framework**

The [**second**](15470_L2.pdf) lecture starts with a parsimonious framework, aimed at capturing the basic economic function of financial transactions/activities – resource allocation. We'll start with some basic notions and then keep incrementing them.

#### 1) Stylized Facts

Key components of what we're going to study:

- Financial environment.

- Agents.

- Financial/securities market.

- Market equilibrium.

- Efficiency.

#### 2) Environment

Two key elements of finance/resource allocation: **time** and **risk**. Consider two dates: t = 0 and 1. There are M possible states at t = 1, denoted by: $\omega_1$, ..., $\omega_M$. The set $\Omega$ = {$\omega_1, ..., \omega_M$} is called the **state space**. 

There is a **probability measure** $\mathbb{P}$ over the state space. The probability for state $\omega_m$ is $p_m$ > 0, m = 1, ..., M, and $\sum_{m=1}^M p_m$ = 1. How the probability and the states relate to each other are important when making decisions later on which assets should we choose.

Most of what we discuss will hold (even w/ the same notation) in alternative environments with multiple periods. More generally, **m can be an index for different combinations of future states and time periods**. Useful example: no uncertainty about the future, *m* indexes different time periods in the future. Only substantive change will be that, in this case, probabilities may not sum to 1 (you may be surprised how infrequently probabilities appear). Interpretation: agents come to the market at time 0, trade to choose state- and time-contingent consumption bundles.

#### 3) Agents

We assume that the economy is populated by K agents, k = 1, ..., K. Each agent has the following characteristics:

- Resources they use in order to decide their position:

    - Information.
    
    - Endowment.
    
    - Production technology.

- Choices: they decide on what's going to be their consumption (+ how they allocate their resources).

- Preferences (Utility).

##### Agent's Information

In addition to P, agents may receive information at t = 0 about the states at t = 1. This information can be public and private. For now, we assume that agents receive no information other than $\mathbb{P}$. All agents use $\mathbb{P}$ as their prior assessment of the likelihood of time-1 states. The agents have: **rational expectations** and **homogenous beliefs**. 

##### Agent's endowment

There is only one *perishable* good/type of capital in the economy. Each agent *k* is endowed with the following:

- $e_0^k$ at t = 0. 

- $e_{1\omega}^k$ at t = 1 in state $\omega$, $\omega \in \Omega$.

Notation: [·,...,·] denotes a row vector, and [·; ...;·] denotes a column vector.

The endowment of agent k can then be by the following vector: $e^k$ $\equiv$ $[e_0^k;e_1^k]$ $\equiv$ $[e_0^k;[e_{11}^k;...;e_{1M}^k]]$, k = 1,...,K.

- Useful special case: standard portfolio problem ≡ $e^k_0$ > 0, $e^k_1$ = 0.

Let $\mathbb{R}^{1 + M}$ denote an (1 + M)-dimensional real space and $\mathbb{R}^{1 + M}_+$ its non- + negative quadrant. Non-negative endowment means e $\in$ $\mathbb{R}^{1 + M}_+$. For a vector...........

##### Agent's production

Each agent may possess a set of **production technologies**. A production technology turns an *investment at t = 0 into output at t = 1*. We can define a production technology by a production function: $y_1(I)$ = [$f_1$(I); ...; $f_M$(I)]. We will assume that: $f_\omega$(0) = $f'_\omega$(I) ≥ 0, $f_\omega$''(I) ≤ 0, $\forall \omega \in \Omega$. The condition on concavity implies **decreasing return to scale**.

##### Agent's consumption

Agents use their economic resources to best meet their economic needs. An agent’s economic need is defined over her **consumption**: $c_0$ at t = 0 and $c_{1\omega}$ at t = 1 in state $\omega$, $\omega$ $\in$ $\Omega$, or $c^k$ $\equiv$ [$c^k_0;c^k_1$] $\equiv$ [$c^k_0$;[$c^k_11;...;c^k_1M$]], k = 1,...,K.

A possible consumption choice, c = [$c_0$; $c_{1\omega}$], is called a **consumption plan**. A realization of a consumption plan, ($c_0, c_{1\omega}$) is called a **consumption path**. C is the **consumption set** and denotes the set of all possible consumption plans. C is a subset of $\mathbb{R}^{1+M}$. Standard choice of C is $\mathbb{R}^{1+M}_+$.

##### Contrast with "standard" application

First application of consumer theory: different arguments of C are associated with different goods: e.g., good 1 is pizza and good 2 is beer. Here, "good" is roughly the same -> always talking about consumption. Elements of $c^k$ correspond with agent k's **state-contingent consumption**. Two reasons why states may differ: 

  - Preferences may differ across states.
  
  - Endowments may differ: different amounts of resources available to consume.
  
  - Models will tend to emphasize the latter channel.

More general environment introduced above: consumption could be state and time-dependent.

##### Agent's Consumption

[**Convex set definition**](https://en.wikipedia.org/wiki/Convex_set): a set in $R^n$ is convex if $\forall$*a* and *b* in the set and $\alpha \in [0,1]$, $\alpha a$ + (1 - $\alpha$)b is also in the set.

**Closed set definition**: a set in $R^n$ is closed if a sequence of elements in the set $a_i$, i = 1,2,.., has *a* as the limit, then *a* is also in the set.

**Consumption set assumption**: consumption set C is a closed, convex subset of $\mathbb{R}^{1 + M}$.

##### Agent's Preferences

An agent’s economic need is described by her preferences, defined by her ranking of all possible consumption plans. 

**Preferences definition**: a preference is a set of binary relations $\succeq$ on C such that:

1) $\succeq$ is complete: $\forall$a,b $\in$ C, a $\succeq$ b or b $\succeq$ a, or both.

2) $\succeq$ is transitive: a $\succeq$ b and b $\succeq$ c implies a $\succeq$ c.

[**Utility function assumption**](https://en.wikipedia.org/wiki/Utility): a preference relation $\succeq$ can be represented by a **utility function**: u(.): c $\mapsto$ R, such that: $\forall a,b \in C$ a $\succeq$ b $\iff$ u(a) ≥ u(b).

Is the utility function realistic? Under certain mild assumptions on a preference relation (continuity), we can show the existence of a corresponding utility function. In general, u(.) is an *ordinal* operator: any strictly increasing transformation of u(.) represents the same preferences.

##### Last note's about agents

Consumption $\iff$ financial wealth. Everything is consumed at t = 1. This can be a shorthand for a more complicated market structure with multiple goods. Agent k solves static consumer problem in background with financial resources $c^k_{1\omega}$. In this case, we think of $c_{1\omega}$ as the indirect utility associated with choosing a consumption bundle a given amount of wealth, with prices given. Another source of uncertainty: prices of goods could depend on $\omega$.

#### 4) Securities Market

A [**security**](https://en.wikipedia.org/wiki/Security_(finance)) is a financial claim yielding a payoff at t = 1: $D_{1\omega}$, $\forall \omega \in \Omega$, or $D_1$ = $[D_{11};D_{12};...;D_{1M}]$. **D** will be referred to as **dividend** or **cash flow**. Define $\mathbb{R}^M$ as the **payoff space**. A security is then defined by a vector in the payoff space.

##### Frictionless market

A [**frictionless market**](https://www.investopedia.com/terms/f/frictionlessmarket.asp). features:

- No access cost.

- No transaction costs.

- No position limits(constraints).

- No market impact.

- No information asymmetry.

- No taxes.

#### 5) The Economy

Summarizing the components we've worked so far, we arrived at a definition of what the economy looks like.

#### 6) Market Equilibrium

In the economy defined above, agents can trade in the securities market to best meet her economic needs, given her resources. By purchasing portfolio $\theta$ at t = 0, she can achieve consumption: 

$c_0$ = $e_0$ - $P^T$ $\theta$,

$c_1$ = $e_1$ + $D_1 \theta$.

The set of consumption plans available to her is given by:

B(e,{$D_1,P$}) $\equiv$ {c ≥ 0: $c_0$ = $e_0$ - $P^T \theta$, $c_1$ = $e_1$ + $D_1 \theta$, $\theta$ $\in$ $R^N$}.

**Budget set**: B(e, {$D_1$, P}).

Each agent solves his/her optimization problem by maximizing utility restricted to budget sets. The **solution** is denoted by $\theta^k$(P,e).

#### 7) Optimality

Optimality/Allocational Efficiency: is feasible given the total endowment of the economy {$e^k \forall k$} if: 

$\sum_{k}c^k$ = $\sum_k e^k$

- [**Pareto dominance**](https://en.wikipedia.org/wiki/Pareto_efficiency).

- Pareto optimality.

### **3) Arbitrage Pricing 1/3**

In our [**third**](15470_L3.pdf) lecture we start our analysis with the general properties of the securities market. The content is divided in four parts.

#### 1) Introduction

Some interesting, and very recurring concepts, we're going to work with:

**Security(N)**: a security is an asset of the market. It is considered **redundant** if its payoff can be **replicated** by a portfolio of other traded securities. This can be represented by $\exists \theta_{n}$ s.t. $D_{n}\theta_{n}$ = $D_n$. 

**Portfolio of securities ($\theta$)**: represents a combination of securities.

**States of the market(M)**: all the different combinations of payoffs possible in that market.

**Payoff Matrix(D)**: denote the market structure with N securities. Example: $D_n$ is the payoff vector of security *n*, $D_{\n}$ is the payoff matrix excluding $D_n$. **D** includes only securities with linearly independent payoffs $\implies$ rank(D) = N ≤ M. Given D, the set $C_1(D)$ = $\{c_1 = D \theta : \theta \in R^n \}$ is called the **payoff space**. The set of securities in D is said to  **span**$C_1$(D). 

Any payoff vector in $c_1 \in C_1$(D) can be delivered by a portfolio $\theta$. It is said then that $c_1$ is to be replicated or financed by $\theta$.

**Market Completeness**: a securities market is complete if any payoff at t = 1 can be achieved from the payoff of a portfolio of traded securities. If N < M, the market cannot be complete. A **sufficient condition for market completeness* is that when the rank of D equals the number of States(rank(D) = M), the market is complete.

**State-Contingent Claims**: a state-$\omega$ contingent claim pays 1 in state $\omega$ and nothing otherwise. Also called an [**Arrow-Debreu security**](https://en.wikipedia.org/wiki/State_prices).

[**Arrow Debreu Market**](https://en.wikipedia.org/wiki/Arrow%E2%80%93Debreu_model): is the type of market with a complete set of state-contingent/Arrow-Debreu securities. Its structure is given by the following matrix:

D^{A - D}\begin{bmatrix}
    1 & \dots & 0 & \dots & 0 \\
    \vdots & \ddots & \vdots & \ddots  & \vdots \\
    0 & \dots & 1 & \dots & 0 \\
    \vdots & \ddots & \vdots & \ddots & \vdots \\
    0 & \dots & 0 & \dots  & 1
\end{bmatrix} = I

Which is basically an Identity matrix. We also have here that N = M, **which denotes a complete market**. That is actually a theorem: The Arrow-Debreu securities market is complete.

#### 2) State Prices

[**State Prices**](https://en.wikipedia.org/wiki/State_prices): it is the price of a state-$\omega$ contingent claim. It corresponds to the time-0 price ffor a payoff of 1 in state-$\omega$ at t = 1. The vector of all state prices can be denoted by the **state-price vector**:

$\phi = \begin{bmatrix}
    \phi_1  \\
    \vdots  \\
    \phi_\omega \\
    \vdots  \\
    \phi_M 
\end{bmatrix}$

#### 3) Arbitrage

[**Arbitrage**](https://en.wikipedia.org/wiki/Arbitrage): is the practice of taking advantage of a price difference between two or more markets: striking a combination of matching deals that capitalize upon the imbalance, the profit being the difference between the market prices at which the unit is traded. Informally, it is the possibility of a risk-free profit after transaction costs. More formally:

Consider a securities market with **market structure D** and **price vector P**. A trading strategy is given by portfolio $\theta$ at t = 0. So **Arbitrage** is a trade in the securities market such that:

i) $P^T \theta ≤ 0$;

ii) D $\theta$ ≥ 0;

iii) at least one of the above inequalities is strict. 

Arbitrage relies only on prices and payoffs, but not probabilities(there is certainty of return with arbitrage). When it exists, it is **available to everyone**. An arbitrage is **scalalable** in frictionless markets. Let's give an example:

Imagine securities A and B, that have the following prices/payoffs:

A: Price 1, payoffs in scenarios a and b: 1,1.

B: Price 1, payoffs in scenarios a and b: 2,1.

Here we have P = [1;1] and D = [1,2;1,1]. If we create a portfolio that sells 1 of A and buys 1 of B, what's gonna be the outcome? It yields payoff: 

\[ -P^T = -(-1+1) = 0  \]

We have:

\[ (D\theta)_1 = -1 + 2 = 1\]

and

\[ (D\theta)_2 = -1 + 1 = 0 \]

In this case, we have arbitrage! So we say that the return on A **dominates** that of B. For more examples, see slides 16/17 of the lecture.

**No Arbitrage Principle**: there is no arbitrage in a frictionless security market.

**Monotonic preferences definition**: agent k's preferences are strictly monotonic if for c > c', $u_k(c) > u_k(c')$. 

**No Arbitrage in Equilibrium Theorem**: In a market equilibrium, there are no arbitrage opportunities if there is at least one agent whose preference is strictly monotonic. (If arbitrage persisted, profits could made from it indefinitely = no equilibrium)

Let's steer our conversation towards reality: there are limits to arbitrage! Let's see some of the difficulties that may arise:

i) In its purest form, arbitrage requires **no capital** and is **risk free**. By selling and purchasing identical securities at favorably different prices, arbitrageur captures an immediate payoff with no up-front capital. No short sale constraints $\implies$ *infinite profits*! 

ii) **Pure arbitrage**: it only exists in perfect capital markets! Requires capital and posting collateral; people are worried about others keeping promises $\implies$ shorting is costly. 

iii) In practice, arbitrage is associated with **opportunity costs**. 

iv) **Imperfect information** and **market frictions** make arbitrage strategies both capital intensive and risky.

v) Arbitrageurs often use leverage to invest more than their own money. Problems: **a)** Face possibility that price gaps will become larger before they converge; **b)** even though most financial assets have limited liability (non-negative payoffs), losses from short-selling can be infinite; **c)** If strategy has lost money, may receive a margin call: post additional collateral or close the position at a loss.

vi) Even with active arbitrageurs, opportunities may persist while arbitrageurs learn how to best exploit them. Length of time is unknown ex-ante.

#### 4) FTAP

An **asset pricing model** is a mapping from a security’s payoff vector d to its price P: P = V(d).

V(.) is called the **pricing/valuation operator/functional**.

The NA principle imposes general properties on the pricing operator V (·).

**Positivity Theorem**: a portfolio with a positive payoff must have a positive price: V(d) > 0 if d > 0.

**Law of One Price**: two portfolios with same payoffs must have the same price: V($d_1$)=V($d_2$) if $d_1$ = $d_2$.

**Monotonicity Theorem**: the higher the payoff, the higher the price from the portfolio. V($d_1$) ≥ V($d_2$) if $d_1$ ≥ $d_2$. Thus, V (·) is an increasing operator.

**Linearity Theorem**: in a frictionless market, the pricing operator is linear: $V(ad_1 +bd_2) = aV(d_1)  + bV(d_2) \forall a,b \in R$.

Given all the knowledge(and theorems!) gathered so far, we arrive at the [**Fundamental Theorem of Asset Pricing**](https://en.wikipedia.org/wiki/Fundamental_theorem_of_asset_pricing): *there is no arbitrage in the securities market if and only if there exists $\phi \gg$ 0 such that for all traded securities: $P^T = \phi^T D$. We call $\phi$ the state price vector implied from D and P*. Proof(taken from Lecture 4!): sufficiency is obvious. Proof by contradiction. Suppose arbitrage exists and $P^T$ = $\phi^T D$. If it is the 1st of arbitrage, then $P^T \theta < 0$ and $D \theta ≥ 0$. Then $\phi^T \times (D\theta)$ < 0 and $D \theta ≥ 0$, but this contradicts our assumptions that $\phi \gg 0$ and $D\theta >=0$. One can make an analogous argument for the 2nd type of arbitrage by assumng that $P^T \theta ≤ 0$ and D$\theta > 0$. This is to be continued on the next lecture. 

### **4) Arbitrage Pricing 2/3**

The [**fourth**](15470_L4.pdf) lecture expands on Asset Pricing. We’ll cover some of the key results that follow no arbitrage assumptions. Define some useful terms that appear throughout the course such as *state-price*, *risk-neutral measure* and *state-price density*(AKA stochastic discount factor/pricing kernel). Learn what no arbitrage implies for sources of risk premia. 

The class is divided between the FTAP and Risk-Neutral measure.

#### 1) FTAP

Let's start by slide 8. The FTAP we just talked about assumes that: $\exists \phi \gg 0$: $P^T = \phi^TD$. 

Given the state-price vector $\phi$, we have the **pricing equation $\forall$ traded securities**: 

\[ P_n = \phi^T D_n = \sum_{\omega \in \Omega} \phi_\omega D_{\omega n}\text{, i = 1,...,N} \]

This pricing equation is also known as the **Discounted Cash Flow**(DCF) or **Present Value**(PV) formula. This concept is extensively studied in finance as it relates the cash flow in a future state to prices in the present. Formally: DCF formula expresses current price as the sum of the present value, i.e.,
market value at t = 0, of all future payoffs, using appropriate state prices. State-price $\phi_\omega$: price of hypothetical Arrow-Debreu security whose payoff may or may not be achievable. $\phi \gg 0 \implies$ all A-D prices are arbitrage-free. Knowing $\phi$ we can **price all traded securities**, without relying on the physical probability measure ($\mathbb{P}$).

To understand state prices, Larry wants to get the intuition that the **context** matters(which relates to the concept he extensively uses of "pain": depending how much pain people feel, they will allocate resources differently through time). When we are deciding among different payoffs, we have to account for variance(risk) and how much the investor is willing to invest in each security. Slides 9/10 exercise some intuition on state-prices, comparing a state in which you lose a job and one in which you get a raise.

So how do we construct $\phi$ in the payoff space? We showed that $\phi^T$ = $P^TD^{-1}$ in a complete market case. In general, NA $\implies$ we can find $\phi$ as a **linear combination of traded assets**.

**Theorem**: if rank(D) = N, there exists a unique $\phi^ast \in \mathbb{R}^M$ such that $P^T$ = $\phi^{\ast}D$, where $\phi^\ast$ = D$\theta$ for some portfolio $\theta$. 

**Stiemke's Lemma**: let D be an m $\times$ n matrix and P, $\theta$, $\phi \in R^m$. No portfolio $\theta$ exists such that:

1) $P^T\theta ≤ 0$.

2) $D \theta ≥ 0$, and

3) at least one of the inequalities is strict.

If and only if there exists $\phi \gg 0$ such that:

$P^T = \phi^T D$.

For the proof, refer to slides 12/13.

**Market Completeness and Unique State Prices Theorem**: in a complete market with no arbitrage there is a unique set of strictly positive state prices. The lecture proceeds to give some examples for more intuition. Good example on slides 15-16.

[**Riskless security**](https://www.investopedia.com/terms/r/riskfreeasset.asp): it is an asset with **certain** future return. Suppose the security 1 has a sure payoff of 1 at *t* = 1. The riskless security can be traded or implies (by a model of $\phi$). Let $P_1$ denote its price at t = 0. The riskless payoff is denoted by $D_1$ = [1,...,1] = $1_M$, where $1_M$ denotes a vector of ones. With the state price vector $\phi$, we have:

\[ P_1 = \phi^T 1_M = \sum_{\omega = 1}^M \phi_\omega \]

The **riskless interest rate**, denoted by $r_F$ is defined as the net payoff from 1 unit of investment in, or the **rate of return** from, the riskless bond:

\[ P_1(1 + r_F) = 1 \text{ or } r_F = \frac{1}{P_1} - 1 \]

This finishes our section about the FTAP.

#### 2) Risk-neutral measure

Given our pricing equation:

\[ P_n = \phi^T D_n = \sum_{\omega \in \Omega} \phi_\omega D_{\omega n}\text{, n = 1,...,N}. \]

Define:

\[ q_{\omega} \equiv \frac{\phi_\omega}{\sum_{\omega '}\phi_{\omega '}} \]

Since $q_\omega$ > 0 and $\sum q_\omega = 1$,

\[ \mathbb{Q} \equiv \{ q_\omega, \omega \in \Omega \} \]

can be interpreted as a measure over $\Omega$.

- Since $\mathbb{Q}$ and $\mathbb{P}$ agree on zero measure sets $\implies$ they are **equivalent**.(?) But in general $\mathbb{Q} \neq \mathbb{P}$.

Now we can **rewrite the pricing equation** as the **risk-neutral pricing formula**: 

$P_n = \frac{\mathbb{E}^\mathbb{Q} [D_n]}{1 + r_F}, \text{ n = 1,...,N}$

where $\mathbb{E}^\mathbb{Q}$[.] denotes the expectation under $\mathbb{Q}$ and $D_n$ here represents the payoff of security *n* as a random variable. $\mathbb{Q}$ is called the *risk-neutral measure*. "Risk-neutral pricing" reflects the analogy that if agents in the market were risk-neutral, they would price all securities by only considering their expected payoffs and the riskless interest rate. In general, the market is not risk-neutral. Refer to the slides for an example.

### **5) Arbitrage Pricing 3/3**

The [**fifth**](15470_L5.pdf) lecture is the last of the three parts introducing arbitrage pricing. Starting after risk-neutral measure it deals with 4 subjetcs.

#### 1) State Price Density

The risk-neutral measure we learned in the last lecture represents the "normalized" state prices. But $\mathbb{P}$ is tied to data. Thus, we would like to relate $\mathbb{Q}$ and $\mathbb{P}$. Given the state price vector $\phi$, we have:

$P_n = \sum_{\omega} \phi_\omega D_{\omega n} = \sum_{\omega} p_\omega \frac{\phi_\omega}{p_\omega} D_{\omega n} \text{, n = 1,...,N}$

**State Price Density**: the SPD($\eta_\omega$) for state $\omega$ is denoted by: $\eta_\omega \equiv \phi_\omega/p_\omega \text{, } \forall \omega \in \Omega$. It gives the **state price per unit of probability**:

\[ P_n = \sum_\omega p_\omega \eta_\omega D_{\omega n} = \mathbb{E}^\mathbb{P} [\eta D_n]\text{, n = 1,...,N.} \]

It is also known as **Stochastic Discount Factor** or **Pricing Kernel**. This leads to the following theorem:

**Representation Theorem**: states that the following are equivalent:

i) Existence of a positive pricing operator (V);

ii) Existence of a risk-neutral measure ($\mathbb{Q}$) and a riskless interest rate ($r_F$);

iii) The existence of a strictly positive state price density ($\eta$).

#### 2) Discount Rates / Risk Premia

Now that we've our pricing formulas for various states and probabilities, we're going to expand our analysis to inclyse discounted factors. The **Present Value(Discounted Cash Flow)** formula is expressed by:

\[ P_n = \frac{\mathbb{E}^\mathbb{P}[D_n]}{1 + \overline{r}_n} = \frac{\sum_\omega p_\omega D_{\omega n }}{1 + \overline{r}_n}\text{, i = 1,...,N}   \].

$\overline{r}_n$ is the discount rate for the payoff $D_n$. If we combine FTAP with the definition of $\mathbb{Q}$, we have: 

\[ \overline{r}_n = \frac{\sum_\omega p_\omega D_{\omega n}}{\sum_\omega \phi_\omega D_{\omega n}} -1 = (1 + r_f) \frac{E^\mathbb{P}[D_n]}{E^\mathbb{\mathbb{Q}}[D_n]} -1, \text{ n = 1,...,N}    \]

We can rewrite above as:

\[ \overline{r}_n = \frac{\sum_\omega p_\omega D_{\omega n}}{P_n} - 1, \text{ n = 1,...,N } \]
 
$\overline{r}_n$ is also called the **expected rate of return** on security *n*. 

We're talking about the value of money on different periods! The DCF for the riskless bond yields:

\[ P_1 = \sum_{\omega} \phi_\omega = \frac{\sum_\omega q_\omega \times 1}{1 + r_F} = \frac{\sum_\omega p_\omega \times 1}{1 + r_F} = \frac{1}{1 + r_F} \]

Or $\overline{r}_1 = \frac{\mathbb{E}^\mathbb{P}[D_1]}{P_1} - 1 = \frac{1}{P_1} - 1 = r_F$

The **time value of money** is the return on the riskless security. The return on the riskless bond is certain:

\[ r_{1\omega} = \frac{1}{P_1} - 1 = r_F\text{, }\forall \omega \in \Omega \]

There is a link between $r_F$(risk-free rate???) and the State-Price-Density: 

\[ \frac{1}{1 + r_F} = E^\mathbb{P}[\eta] \iff 1 + r_F = \frac{1}{E^\mathbb{P}[\eta]} \]

Now that we've talked about returns over time, let's compare returns to another concept: risk-free return.

[**Risk Premium**](https://en.wikipedia.org/wiki/Risk_premium): expected value in excess of the riskless interest rate: $\pi_n \equiv \overline{r}_n - r_F$. From earlier results, the risk premium will be positive when $E^\mathbb{Q}[D_n] < E^\mathbb{P}[D_n]$. Refer to the lecture for an example. 

Let's derive an expression for the risk premium of any asset. Let $r_n$ denote the **return realization**(return for the specific $\omega$ which realizes in the data). Divide both sides of the valuation formula with the SPD by price and get: 1 = $\mathbb{E}^\mathbb{P}[\eta(1 + r_n)]$. Rearranging, we get: $\mathbb{E}^\mathbb{P} [r_n - r_f] = -(1 + r_f)Cov^\mathbb{P}[\eta, r_n - r_f]$.

Let's move forward to talk about [**idiosyncratic risk**](https://www.investopedia.com/terms/i/idiosyncraticrisk.asp): a type of investment risk, uncertainties and potential problems that are endemic to an individual asset. So, this risk is particular to the stock/security it is associated to. Considering that a risky asset's payoff is uncorrelated with the discount factor $\eta$, a single decomposition is suggested:

\[D_n = \underbrace{prof(D_n|\eta)}_\text{"priced cash flow component"} + \underbrace{e_n}_\text{"unpriced cash flow component"}  \]

Where E[$e_n$] = 0 and $e_n \perp \eta$. So: proj($D_j,\eta$) = proj($D_k,\eta$) $\iff$ $P_j = P_k$. Which means that there are no compensations for holding mean 0 risks orthogonal to the SPD.

**Redefining Risk**: people are [**risk-averse**](https://en.wikipedia.org/wiki/Risk_aversion) we know that the idiosyncratic risk can be diversified away. We arrive at a new equation:

\[ \mathbb{E}^\mathbb{P}[r_n - r_f] = -(1+r_f) Cov^\mathbb{P}[\eta,r_n - r_f] = \frac{Cov^\mathbb{P} [-\eta ,r_n - r_f]}{E^\mathbb{P}[\eta]} \]

Where does the risk premium come from? Any macro-finance model has as a central element the specification: price density / stochastic discount factor $\eta$.

<center> risk premium = - risk free rate x comovement of return with SDF  </center>

Now the pain we talked about before comes into play: "stochastic discount factor" $\approx$ "pain index" $\implies$ SDF is low in good macroeconomic states, high in bad states $\implies$ Intuition: *assets that perform well in bad times earn lower returns*. For more, read about [**Hansen-Jagannathan bounds **](https://en.wikipedia.org/wiki/Hansen%E2%80%93Jagannathan_bound) in the slides. 

#### 3) SPD/SDF bounds

What are the implications of what we've seen so far? Empirically? Tons. But for now, let's deal with:

Any theory model generates an SDF $\eta$. And sometimes models are good, but there are some models that are "wronger". 

#### 4) Multiple periods

[**Law of Iterated Expectations**](https://brilliant.org/wiki/law-of-iterated-expectation/): suppose we want to calculate an outcome conditioning on whether Trump will win next election($\mathcal{F}_1$) and then announce tariffs ($\mathcal{F}_2$). The law of iterated expectations says:

\[ \mathbb{E}[X | \mathcal{F}_1] = \mathbb{E} [ \mathbb{E}[X | \mathcal{F}_2] | \mathcal{F}_1 ] \]

The point being made is that the best forecast one can make with limited information is the forecast of
the forecast one would make with better information.

In addition to that, let's do some math in order to understand the **fundamental value of a stock** and then derive a general **DCF representation**.

Recall the one period stock payoffs: i) small dividend(cash flow) $D_{t+1}$ paid; ii) also receive the share price $P_{t+1}$; iii) we know that $X_{t+1} = D_{t+1} + P_{t+1}$ and $R_{t+1} = \frac{D_{t+1} + P_{t+1}}{P_t}$. We wills suppose NA for all periods(SDF $\eta_{t+k}$ holds for all periods). Can derive the **present value of future stock payoffs**:

\[ P_t = \mathbb{E}_t [\eta_{t+1}(P_{t+1} + D_{t+1})] \]

Also

\[ P_{t+1} = \mathbb{E}_{t+1} [\eta_{t+2}(P_{t+2} + D_{t+2})] \]

This implies that:

\[ P_t = \mathbb{E}_t [ \sum_{k = 1}^T (\eta_{t+1} \dots n_{t+k})D_{t+k}] + \underbrace{\mathbb{E}_t [\eta_{t+1}\dots\eta_{t+T}P_{t+T}]}_\text{Usually assume as T $\rightarrow\infty$ that the above term $\rightarrow$ 0} \]

\[  \mathbb{E}_t \sum_{j=1}^\infty [ \prod_{k=1}^j \eta_{t+k}] D_{t+j} \equiv \mathbb{E}_t \sum_{j = 1}^\infty \eta_{t:t+j} D_{t+j} \]

And for the General DCF representation we ask: What is the value of a single dividend k periods in the future?

- **Dividend strip** price: $P_t^{(k)} = \mathbb{E}_t [\eta_{t:t+k}D_{t+k}]$.

- Expected payoff after *k* periods: $\mathbb{E}_t [D_{t+k}]$.

- $\mathbb{E}$[k period return] = $\frac{\text{expected payoff}}{\text{Price}} = \frac{\mathbb{E}_t[D_{t+k}]}{\mathbb{E}_t[\eta_{t:t+k}D_{t+k}]} \equiv \mathbb{E}_t [R^{(k)}_{t:t+k}$

- $\frac{\text{expected cash flow}}{\text{horizon / div-specific expected return}} = \mathbb{E}_t [\eta_{t:t+k}D_{t+k}] = \frac{\mathbb{E}_t[D_{t+k}]}{\mathbb{E}_t[R^{(t)_{t:t+k}}]}$

And the logic from above can be applied to multiple dividends:

\[ P_t = \mathbb{E}_t \sum_{j=1}^\infty \eta_{t:t+j} D_{t+j} = \sum_{j=1}^\infty \frac{\mathbb{E}_t[D_{t+j}]}{\mathbb{E}_t[R^{(j)}_{t:t+j}]} = \text{sum of discounted cash flows}    \]


### **6) Arbitrage Pricing - Corporate Finance and Fixed Income Applications**

The [**sixth**](15470_L6.pdf) lecture starts applying what we learned so far from asset pricing, this time into neoclassical corporate finance and fixed income applications. 

#### 1) Neoclassical Corporate Finance

Let's advance on our analysis. Now, we also allow agents to invest in real productive opportunities $\Longleftarrow$  often created through corporations. So now we're going to **analyze the behavior of corporations**. Setting: *frictionless* and *complete* securities market; firms are only defined by the production technologies they possess.

**Production Opportunities**: given we are considering a complete securities market, we can assume a complete set of A-D securities being traded with price vector $\phi \gg 0$. In addition to his endowment, let's assume the agent also has an production opportunity defined by the following production function:

\[ y_{1\omega} = y_\omega(y_0), \omega \in \Omega \]

$y_0$ = is the investment into the production opportunity at time 0,

$y_\omega (y_0)$ = is the output from production at time 1 in state $\omega$.

The production function satisfies: 1) $y_\omega$(0) = 0; 2) $y'_\omega$(.) ≥ 0; 3) $y_\omega ''(.) < 0$. An interior solution is guaranteed given the Inada conditions happen. So what is the **optimal production** for the agent? In order to organize a maximization problem we have to understand what's his wealth at t = 0, for which we have to discount his future wealth:

At t = 0: $w = e_0 - y_0 + \phi^T (e_1 + y_1) = e_0 + \phi^T e_1 + v$. 

His NPV is given by:

\[NPV =  v = \phi^T y - y_0 = \sum_{\omega \in \Omega}\phi_\omega y_\omega (y_0) - y_0 \]

The agent’s optimization problem now becomes:

\[ max_{y_0,c_0,c_1} u([c_0;c_1]) \text{ s.t. } c_0 + \phi^T c_1 = w \]

To solve it: 1) choose $y_0$ to maximize current wealth (i.e. the NPV of production); 2) choose c to maximize utility. The FOC: 

\[ \text{marginal cost } = 1 = \phi^T y'(y_0) = E^\mathbb{P}[\eta_\omega y_\omega '(y_0)] = \frac{1}{1 + r_F} E^\mathbb{Q} [y_\omega ' (y_0)] = \text{ expected discounted marginal benefit }\]

Given the concavity of y(.), we have a unique solution. It's important to notice that: the optimal production decision is independent of the agent’s consumption decisions. It only depends on the production function and the state prices.

**Corporate Investment Decisions**: production opportunities are often owned by firms $\rightarrow$ each firm is owned by agents. How can we relate the firm production to the agent's wealth? The k-agent's wealth is:

\[ w_k = e_{k0} + \phi^T e_{k1} + \sum_{j} s_{kj} v_j. \]

Where: $s_{kj}$ is the share of firm j owned by agent k.

What is the firm's behavior? **Maximizing Current Value Theorem**: with a frictionless and complete securities market, there is unanimity among a firm’s shareholders on its investment decisions, which is to maximize its current market value (NPV).

**Financing decision**: how a firm raises the funds for its investment is called its financing decision. For ex: a firm can be financed by debt or equity. Depending on who financed the firm, the returns will be destined differently. 

**Capital structure**: the mix of securities a firm issues to finance its operations.

The value of the firm's assets (payoffs) is: $V = D + E = \phi^T y_1$. The net value of the equity for shareholders is now the PV of future dividends - initial cash invested by shareholders. 

**Modigliani-Miller Theorem**: with a frictionless and complete securities market, a firm’s value is determined solely by its investment decisions and is independent of how it is financed. This is one of finance's most famous theorems. 

#### 2) Modeling the Term Structure

Let's start with a basic security: default-free securities (e.g., US Treasuries). A **bond** promises to pay: **i)** Fixed coupon payments at pre-specified dates; and **ii)** Fixed principal amount, also called the face value or par value, plus the coupon amount at the maturity date. For bonds without coupons, we usually normalize face value = \$1. When the Law of One Price Holds (no arbitrage), any N period default-free coupon bond can be expressed as a portfolio of zero coupon bonds:

\[ \text{bond price = } \sum_{j = 1}^N \underbrace{CF_{t+j}}_\text{known coupon payment} + P_{j,t}  \]

so we can mostly restrict our attention to zero coupon bonds. What is the link between zero coupon bonds and the SDF? SDF $\eta$(s) at time t depends on $s_t$ $\in$ {1,...,S}. The probability that $s_{t+1} = s$ just depends on st, doesn’t change over time. Under this structure, prices will depend on maturity and state variable. Notation $P_{N,t} ≡ P_{N}[s_t]$. Given NA: price = discounted payoff. If k = 1 and $s_t = j$, we do a lot of math (slides 18/19) to get to $P_2$[$s_t$]. But in general, the formula is: $P_{N,t} = E_t[\eta_{t+1} P_{N-1,t+1}] = E_t[\eta_{t+1} \times \dots \times \eta_{t+N}] \equiv E_t[\eta_{t:t+N}]$.

The **yield to maturity** for a zero coupon bond is the geometric mean of the gross return that investor gets if holding bond to maturity: $[\frac{Payoff}{Price}]^{\frac{1}{N}} = [\frac{1}{P_{Nt}}]^\frac{1}{N} \equiv Y_{NT} \iff P_{Nt} = [\frac{1}{Y_{Nt}}]^N$. The important intuition here is that: prices and yields (returns) move in opposite directions! If investor buys and holds the bond to maturity, its cumulative return is known and has an geometric mean of $Y_{Nt}$. When we take logs from zero coupon bonds, they are easier to work with. And another intuition that is important: longer maturity bonds are more responsive to the same change in yield (can we link this to the LeChatelier principle?).

**Should we compare yields across maturities**? Yield captures an average rate of return over the life of the loan $\rightarrow$ yields across maturities are measured in different units. The yield curve plots the currently available sets of zero coupon bond yields on offer from the US government. It also changes a lot over time.

[**Inflation**](https://en.wikipedia.org/wiki/Inflation): we usually work with *real* consumption, not nominal. That's why we must take inflation into account. The nominal bond price is the real price $P_{n,t}$ times a price index $CPI_t$.  Our asset pricing equation becomes: 

\[ 1 = E_t [\eta_{t+1} \frac{P_{n-1,t+1}}{P_{n,t}}] = E_t [\eta_{t+1} \frac{P_{n-1,t+1}^\$ / CPI_{t+1}}{P_{n,t}^\$/CPI_t}] \]

\[ 1 = E_t [\frac{\eta_{t+1}}{\prod_{t+1}} \frac{P_{n-1,t+1}^\$}{P_{n,t}^\$}] \equiv E_t [    \underbrace{\eta_{t+1}^\$}_\text{Nominal SDF} \underbrace{\frac{P^\$_{n-1,t+1}}{P_{n,t}^\$}}_\text{nominal return}] \]

We can choose two ways: i) Use a real SDF + real prices, but account for inflation $\prod$; ii) use a nominal SDF + nominal yields 

**A recipe for the yield curve**: Yield curve $\iff$ moments of the SDF. Since zero coupon bonds are just moments of the SDF over different hori- zons, observing the entire term structure on an essentially tells us a lot of information about η and its dynamics.

[**Vasicek Model**](https://en.wikipedia.org/wiki/Vasicek_model): is a mathematical model describing the evolution of interest rates. For more about it, refer to slides. PS 2 question 2 requires this.

### **7) Arbitrage Pricing - Option Pricing and Applications**

The [**seventh**](15470_L7.pdf) lecture furthers our knowledge on arbitrage pricing, now onto Option pricing applications. We’ll discuss implications of the no arbitrage framework for derivative se- curities, especially options. This isn’t just about calculating asset prices. Many interesting economic decision problems involve option-like payoffs. For example: writing re- search papers / hiring job market candidates! I’ll also emphasize some ways in which empirical researchers have used information from derivative markets + no arbitrage conditions to back out model-free measures of (risk-neutral) expectations from financial markets.

The lecture is divided in 6 parts:

#### 1) Options

We start with the basic concept of derivatives.

[**Derivative**](https://en.wikipedia.org/wiki/Derivative): is a contract whose value derives from the price of another observable outcome (often a price of another security).  Let $X_t$ be the payoff of a given asset at time T > t. We call $X_T$ the **underlying asset**. Ex: $X_T = S_T$ the stock price. A derivative has payoff = f($X_T)$ where f(.) is a **known**, **potentially nonlinear** function specified as part of the contract. Some derivatives have payoffs that depend on the whole path of {$X_t$}$^T_{t=t+1}$. We can **price a derivative** using the SDF: $E_t [\eta_{t:T} f(X_T)]$. 

[**Stock Options**](https://www.investopedia.com/terms/s/stockoption.asp): gives an investor the right, but not the obligation, to buy or sell a stock at an agreed upon price and date. There are two types of options: **puts**, which is a bet that a stock will fall, or **calls**, which is a bet that a stock will rise. An **european option** gives the the option to buy/sell at a future date T at a fixed price K. The payoffs of a european call($c_1$) and put ($p_1$) are given by:

\[ c_1 = [S_1 - K]_+, p_1 = [K - S_1]_+ \]

**Equity** is a call option on the assets of the firm. **Debt** underlying minus a call option on assets of the firm. For a call, S − K is called its intrinsic value, i.e., the cashflow if exercised. The intrinsic value of a put is K − S. An option is said to be:
- In the Money (ITM), if its intrinsic value is positive;

- At the Money (ATM), if its intrinsic value is zero;

- Out of the Money (OTM), if its intrinsic value is negative(which obviously means that it's suboptimal to exercise the option).

The payoff of an option or a portfolio of options depends on the price of the underlying asset at maturity, S. A “straddle”: long 1 call plus 1 put with the same strike K. Its payoff:

\[ [S - K]_+ + [K - S]_+\]

This leads to two scenarios: *1)* if S ≤ K: K - S; *2)* if S > K: S - K. A "butterfly" is: long 1 call at strike K − $\delta$, short 2 calls at strike K, long 1 call at strike K + $\delta$. For the payoff, refer to slide 12.

#### 2) Pricing Properties

But how do we price options? **Arbitrage Pricing Properties of Options**: Let c(S,K) and p(S,K) denote the prices of a European call and put. An obvious **Theorem** is: Option prices are non-negative. In particular, c(S, K ) ≥ 0 and p(S, K ) ≥ 0. Other related theorems are: 

**Theorem**: c(S,K) is non-increasing in K and p(S,K) is non-decreasing in K.

**Theorem**: c(S,K) and p(S,K) are convex in K.

**Theorem**: let $\theta > 0$ be a portfolio of N securities with price vector S = [$S_1;...;S_N] > 0$ and K = [$K_1;...;K_N$]> 0. Then:

\[ c(S^T \theta, K^T \theta) ≤ \sum_{i=1}^N \theta_i c(S_i, K_i)\text{, and } p(S^T \theta, K^T \theta) ≤ \sum_{i = 1}^N \theta_i, p(S_i,K_i) \]

Thus, an option on a portfolio is worth less than a portfolio of options on the assets in that portfolio.

What are the bounds of the option prices?

**Option Price Upper Bound Theorem**: S ≥ c(S,K)

**Option Price Lower Bound Theorem**: c(S,K) ≥ [S - $\frac{K}{1 + r_F}]_+$ = max {0, S - $\frac{K}{1+r_F}$}

**Put-Call Parity Theorem**: if there exists a riskless bond with interest rate $r_F$, then: c(S,K) + $\frac{K}{1 r_F} = p(S,K) + S$

I'm not going to deal with American options here.

#### 3) Early Exercise

Blergh.

#### 4) Option Pricing

In a complete securities market, there exists a unique state price vector $\phi$. Let $S_{1\omega}$ denote the time-1 stock price in state $\omega, \omega \in \Omega$. The price of a European call option is given by: c(S,K) = $\sum_{\omega \in \Omega}\phi_\omega [S_{1\omega} - K]_+ = \frac{\mathbb{E}^\mathbb{Q}[[S_1 - K]_+]}{1 + r_F}$ where $\mathbb{Q}$ is the risk-neutral measure. In order to obtain more concrete results, we need to make additional as-
sumptions on the stock price process. ([**“There is no free lunch.”**](https://en.wikipedia.org/wiki/Milton_Friedman)). We then proceed to construct a binomial model. Follow the slides for the math. The final result is to arrive at a risk-neutral pricing formula for options: 

\[ c = \frac{1}{1 + r_F}[q c_u + (1-q)c_d]  = \frac{\mathbb{E}^\mathbb{Q}[c_1]}{1 + r_F}  \]

#### 5) Option and Market Structure

We now consider how derivative securities can help to complete markets(my quick response is: hedge!). Suppose that there exists a security with state-separating payoff X: $X_\omega \neq X_{\omega '}$ if $\omega ≠ \omega '$, $\forall \omega, \omega ' \in \Omega$. The security could be a portfolio of securities. We call this security an state index security. The slides go on by explaining the setting we work on on a Market for Options. We arrive at 4 main formulas:

1) State price of $\omega$: 

2) The price of the security with payoff $D_\omega  \omega \in \Omega$:

3) The aggregate payoff of the stock and of the riskless bond:

4) The risk-neutral density function:

#### 6) Applications

The slides keep on many practical (remember: practitioner's field!) applications of the options market.

### **8) Arbitrage Pricing Theory Part 1**

The [**eigth**](15470_L8.pdf) lecture introduces the Arbitrage Pricing Theory. It is separated into 4 parts:

#### 1) Introduction

Arbitrage pricing is a theory on **relative pricing**: 1) we start with the payoffs and prices of a set of base securities; 2) move on to determine the prices of other securities by NA. For options, we can price them using the underlying security and the riskless bond. In general, we can price redundant securities using the prices of a set of base securities. 

#### 2) Beta/Expected Return Decomposition

We use decomposition for expected returns. Starting with our fundamental asset pricing equation, we use a portfolio that mimics the SDF and its risk premium to find an equation for $\eta$. We substitute all that into the formula for the risk premium:

\[ \mathbb{E}^\mathbb{P}[r_n - r_F] =  \underbrace{\frac{Cov^\mathbb{P}[r_n - r_F, r_{-\eta} - r_F]}{Var^\mathbb{P}[\eta]}}_\text{SDF risk exposure = loading} \times \underbrace{\lambda}_\text{$r_{-\eta}$ risk premium} \equiv \underbrace{\beta_n}_\text{quantity of risk} \times \underbrace{\lambda}_\text{market price of risk}\]

Each asset’s expected return depends solely on its loading $\beta_n$ on $r_{-\eta} − r_F$. $\lambda$ is the **market price of risk**: captures the compensation that an investor receives per unit of exposure to the SDF. So the idea is to decompose the **variance** into: **i)** pricing error; **ii)** comovement with SDF excess return $r_{-\eta}$; **iii)** idiosyncratic (unpriced) component. **Unpriced variance** = asset-specific variance + variance of other common sources of variation which are uncorrelated with $r_{- \eta}$. All asset pricing models imply an SDF $r_{−\eta,t}$ and involve a similar variance decomposition and a similar intuition! Theory predicts that the expected returns line up with $\beta_n$. 

```{r, echo=FALSE}
library(png)
library(grid)
setwd("~/Dropbox/R/Site-Gabriel/public/MIT")
img <- readPNG("32.png")
grid.raster(img)
```

We can form empirical estimates of $\beta_n$ and expected returns. Theory is (quite) testable!

#### 3) Risk Factors and Pricing

Setting: 

- There are n = 1, . . . , N securities in the market, with payoff matrix D.

- Assume the first security is riskless. (This is not necessary but convenient.)

- Let rank(D) = K, which can be less than M, the number of states.

- Thus, some of the securities have redundant payoffs.

- Let F denote a basis for D: F is a set of K linearly independent vectors: F $\equiv [F_1,...,F_K]$, where each $F_k$ is a (M x 1) vector and F is a (M $\times$ K) matrix.

- We refer to these vectors as **factors** and F as the **factor structure**.

**Factor Pricing Theorem**: there exists a set of coefficients $\lambda \equiv [\lambda_1; ... ; \lambda_K]$ such that $\forall Z \in C$:

V(Z) = $\lambda^T \beta_Z = \sum_{k=1}^K \lambda_k \beta_{Zk}$

where V(.) is the valuation operator. 

The key point here is that $\lambda_k$, k = 1,...,K, is independent of Z. So: $F_k$ represents a **risk factor**; $\lambda_k$ represents the corresponding **market price of risk**. Then we proceed to reformulate that in terms of the **returns**. Refer to the slides for the math.

Then we give a binomial example.

#### 4) Exact APT

**Lemma**: the value of any gross return is 1.

**Lemma**: the value of the sure gross return $R_F \equiv$ 1 + $r_F$ is 1. 

**Lemma**: under the risk-neutral measure, all securities yield the riskless gross return: $\mathbb{E}^\mathbb{Q}[R_n] = R_F$ or $\mathbb{E}^\mathbb{Q}[R_n] - R_F = 0$, n = 1,...,N,

**Exact APT Theorem**: let $R_n$ = gross return on security $n$, $\overline{R}_n$ its expected value and

\[ R_n = \overline{R}_n + F \beta_n \text{, n = 1,...,N}\]

where F = [$F_1,...,F_K$] are the K risk factors and $\beta_n$ $\equiv [\beta_{n1};...;B_{nK}$] is security n's betas. Then, no arbitrage requires that: 

\[ \overline{R}_n - R_F = \overline{r}_n - r_F = \sum_{k=1}^K \lambda_k \beta_{nk} = \lambda^T \beta_n \text{, n = 1,...,N}\]

where $\lambda \equiv [\lambda_1;...;\lambda_K]$ and $\lambda_k = - \mathbb{E}^\mathbb{Q}[F_k]$, k = 1,...,L.

**Factor Portfolio Theorem**: for each factor Fk, k = 1, . . . , K, there exists a factor portfolio $\theta$k.

The expected excess return on the factor portfolio gives the factor premium: $\overline{R}_k - R_F = \overline{r}_k - r_F = \lambda_k$. We then have the following exact APT: $\overline{r}_n - r_F = \sum_k \beta_{nk} (\overline{r}_k - r_F)$, n = 1,..., N.

### **9) Arbitrage Pricing Theory Part 2**

The [**ninth**](15470_L9.pdf) lecture advances on what we've just seen on Arbitrage Pricing Theory. The content is divided in 4 parts:

#### 1) Factors and Diversification

Last time, we derived an APT result which held when returns followed an exact factor structure:

\[ \overline{r}_n - r_F = \sum_k \beta_{nk} (\overline{r}_k - r_F) \equiv \sum_k \beta_{nk} \lambda_k \text{, n = 1,...,N} \]

Where $\lambda_k = \overline{r}_k - r_F$ is the risk premium of the $k^{th}$ factor-mimicking portfolio. 

Today's lecture derives a similar pricing result when a *large number of returns follow an approximate factor structure*. 

**Factor Model For Returns**: we work with a generalized model for security returns. In a factor model, security returns are given as follows: 

\[ r_n = \overline{r}_n + \sum_{k=1}^K \beta_{nk} F_k + \varepsilon_n \text{, n = 1,...,N,}  \]

where:

1) $\mathbb{E}[F_k] = \mathbb{E}[\varepsilon_n] = \mathbb{E} [\varepsilon_n | F_k]\text{ = 0 } \forall k,n$

2) $\mathbb{E} [\varepsilon_n^2] = \sigma^2_n$ < v < $\infty$, $\mathbb{E}[\varepsilon_n, \varepsilon_{n'}]$ = 0 $\forall n ≠ n'$.

Our setting: i) **Risk Factors**: are given by $F_1,...,F_K$ for all the securities; ii) **Idiosyncratic risks**: are given by $\varepsilon_1,..., \varepsilon_N$; iii) Setting $\varepsilon_n = 0 \forall n$, we return to the **exact factor model**; iv) We assume *N* very large($\rightarrow \infty$) while *K* small. Also, we can express the factor model in a matrix form by creating vectors for *r*, $\overline{r}$, $F$, $\beta_n$, $\beta$ and $\varepsilon$. We can then express the factor model for returns as follows: $r = \overline{r} + F \beta + \varepsilon$. Moving forward, we can generalize our variance decomposition into a set of *K* independent factors and residuals uncorrelated with the factors.

**Diversification**: how much do the idiosyncratic risks impact pricing? Less if we **diversify**. A portfolio $\theta$ is called *well diversified* if $\theta_n = O(\frac{1}{n})$, where $O(\frac{1}{n})$ means of order 1/n, so as $n \rightarrow \infty$, n ||$\theta$||$^\infty$ is bounded. For a **sequence of portfolios**, for them to be called well diversified with $1_n^T \theta = 1$ and $\exists$ 0 < k < $\infty$ such that $\forall$ n and i = 1,...,n we have: $\theta_{ni}^2 < \frac{k}{n^2}$. The definition applies to a sequence of portfolios, not a single portfolio. Example: the portfolio $\theta = [\frac{1}{n};...; \frac{1}{n}]$ is well diversified; portfolio $\theta = [0;...;1;...;0]$ is concentrated. Then we advance to a math-heavy example of the variance of an equally weighted portfolio. 

**Systematic vs Idiosyncratic Risk**: an asset pricing model splits an asset’s return variance into 2 types of risk: i) **Diversifiable(idiosyncratic)**: Firm-specific or idiosyncratic risk, can be eliminated by holding a well-diversified portfolio; and ii) **Non diversifiable(systematic)**: Common sources of risk that cannot be eliminated through portfolio selection (ex: in a macroeconomic crisis, there is nowhere to hide). Asset pricing try to identify sources of systematic priced risk.

**Diversification Theorem**: for a sequence of well diversified portfolios $\theta_n$: $\mathbb{V} [\varepsilon_{\theta_\n}] = \mathbb{V} [ \sum_i \theta_{ni}\varepsilon_i] \rightarrow 0$ of order 1/n, which means that as $n \rightarrow \infty$, $\theta_i$ is bounded above by a constant (you limit how much variance you have in your portfolio).

#### 2) APT

**Asymptotic Arbitrage**: is a sequence of portfolios $\theta_n$ that are self-financed ($1_n^T \theta_n = 0$) such that as $n \rightarrow \infty$, we have: 1) $\mathbb{E}[r_{\theta_n} ]\rightarrow \alpha > 0$; 2) $\mathbb{V}[r_{\theta_n}] \rightarrow 0$. Asymptotic arbitrage is an **arbitrage in the limit**. It means you don't put money in at the beginning, you are exposed to no risks, and in the future you're going to get some money. 

**General Version of the APT**: given a K-factor model for security returns, if there is no asymptotic arbitrage then there exists a scalar, $r_F$, a K-vector, $\lambda = [\lambda_1;...;\lambda_K]$, and a positive constant A, such that: $\sum_{i=1}^n [\overline{r}_i - (r_F + \lambda^T \beta_i)]^2 = \sum_{i=1}^n [\overline{r}_i - (r_F + \sum_k \lambda_k \beta_{ik})]^2 < A < \infty$. The APT states that in a factor model of returns, **no asymptotic arbitrage (NAA) yields approximate factor pricing**: $\overline{r}_i - r_F \approx \sum_{k=1}^K \lambda_k \beta_{ik}$, $\forall i$. The **pricing error**($\delta_i$) for security *i*, is "non-trivial" only for a small number of securities: $\sum_i |\delta_i|^2 < A < \infty$. The logic of the APT is that the price will adjust, i.e. investors trade, in order to eliminate the asymptotic arbitrage opportunities $prices$ adjust until all expected returns line up with $\beta$. What are the implications of the APT? Given N is large and risk factors are small:

\[ \overline{r}_i - r_F = \sum_{k=1}^K \beta_{ik} (\overline{r}_k - r_F) = \sum_{k = 1}^K \beta_{ik} \lambda_k, \forall i \]

Where:

- $\beta_{ik}$ is the **factor loading** of security *i* on factor *k*. 

- $\overline{r}_k - r_F = \lambda_k$ is the risk premium of the traded portfolio that mimics factor k. 

- The main prediction of APT is equivalent to a model of the SDF which is the affine in the factors: $\eta = a + Fb$. 

#### 3) Testing the Theory

But APT may not apply to all securities given the market value of public firms is extremely concentrated among a small number of stocks. How can we **test the APT**? Suppose we have an empirical proxy for the factors and we want to test whether the expected returns lie on the Securities Market Line (hyperplane with > 1 factor) implied by the expected return of the factors. Two approaches are: 1) **time series**: is alpha zero in a regression of excess asset returns on the factors? Only applicable w/ traded factors (or factor-mimicking portfolios). APT predicts that $\alpha_i$ = 0, we test whether our $\hat{\alpha}_i$ indeed equals 0; 2) **cross-sectional**: do estimates of beta explain average returns? Make an empirical counterpart to the SML. Refer to Campbell 3.3. When we empirically test the APT we have to take practical considerations into account such as: characterize all sources of systematic risk, find data on the factors, estimate $\beta$ and $\lambda$. 

#### 4) Some evidence

The main approach(Fama-French) envolves using observable characteristics of individual stocks to form portfolios and then test the ability of a given factor model to explain variation in expected returns across portfolios in the data. Sometimes it doesn't explain $\rightarrow$ anomalies! We then go over a lot empirical evidence (always remember: practitioner's field!) about how the market behaves and how well can we model/explain it.

### **10) Cross-sectional asset pricing empirics and expected utility**

The [**tenth**](15470_L10.pdf) lecture deals with the empirics of cross-sectional asset pricing and then takes a turn into micro to talk about expected utility and risk-aversion. The lecture is divided in 4 parts, but the last two were supposed to be covered in last week's class and so I already included these two parts in Lecture 9:

#### 1) Testing the APT/CAPM Theory

Refer to Lecture 9.

#### 2) Some evidence

Refer to Lecture 9. 

#### 3) Expected Utility Theory

We've already concluded the "reduced-form" part of the course. Next, we will start working from the bottom up to build a **micro-founded** model. This means we're going to understand how the agents choose! The data we (can) use are highly informative about models and investors’ expectations. We now start to explore the connection between **asset prices and the economic activities** of the agents in the economy. Let's micro this up!

**Preference**: binary relation represented by $\succeq$ on consumption set C that satisfies **completeness** and **transitivity**. Preferences have many axioms:

**Continuity**: two close consumption plans should also be “close” in their rankings. Formal: $\forall c \in C$, the sets {$a \in C : a \succeq c$} and {$b \in C: b \succeq c$} are closed.

**Insatiability**: the more the merrier! Formally: $a \succ b$ if a > b.

**Convexity**: the sets of preferred bundles are convex(diversification is good!). Formally: $\forall a,b,c \in C$ and $\alpha \in (0,1)$, if a $\succeq$ b and c $\succeq$ b, then $\alpha a + (1 - \alpha) c \succeq b$. 

Knowing this about the agent's preferences, we advance to the [**Utility Function**](https://en.wikipedia.org/wiki/Utility). The UF tries to represent a preference relation and give mathematical values to it. So a utility function for a preference relation $\succeq$ is a function u from C to R: $u: C \rightarrow R$ such that $\forall a,b \in C, u(a) ≥ u(b)$.

**Debreu Theorem**: for a preference $\succeq$ defined on a closed and convex consumption set C satisfying the Continuity Axiom, there exist a continuous utility function u(.) on C such that: $\forall a,b, \in C$, a$\succeq$b if and only if u(a) ≥ u(b). All we defined in this section will be useful in the sense that since that preferences can be fully defined by a utility function, going forward we will start with the **utility function when describing an agent’s preference**. I won't go over much of the utility function and consequences since I've already seen that in [**Micro**](https://gabrielvoelcker.netlify.com/mit/14.121-microeconomic-theory-i). Some important concepts I'll address:

**Continuity Axiom**: for all consumption c, probabilities $p_a, p_b$ and $p_c$: $ [c;p_a] \succeq [c;p_b] \succeq [c; p_c] \implies \exists \alpha \in (0,1) : [c; (1 - \alpha)p_a + \alpha p_c] ~ [c;p_b]$

**Independence Axiom**: if A is preferred to B, then a compound lottery that mixes A and B with C with probability $\alpha$ has the same preference ordering. Formally: for all consumption c, probabilities $p_a$, $p_b$ and $p_c$ and $\alpha \in (0,1)$: $[c;p_a] \succeq [c;p_b] \implies [c;(1 - \alpha)p_a + \alpha p_c] \succeq [c; (1 - \alpha) p_b + \alpha p_c]$.

The lecture then adds some concepts/simplifications of the expected utility so it;s easier to work with it. Go to the slides for: **state independence**, **time additivity**, **complements or substitutes**, **marginal utility**. And lastly, exposes some criticisms about Utility Theory.

#### 4) Risk Aversion

This section briefly addresses how the utility function relates to the agents' risk aversion. This is given by:

**Convexity of Preferences**: convexity of preferences $\implies$ the sets of preferred bundles {$a \in$ C: a $\succeq$ c} are convex. **Strict convexity** replaces $\succeq$ with $\succ$. Formally: $\forall a,b,c \in C$ and $\alpha \in$ (0,1), if a $\succeq$ b and c $\succeq$ b, then $\alpha a + (1 - \alpha)c \succeq b$. 

**Concave Definition**: a function u(.) is **concave** if $\forall x,x'$ and $\alpha \in [0,1]$, u($\alpha$ x + (1 - $\alpha$)x') ≥ $\alpha$u (x) + (1 - $\alpha$)u(x').

**Concavity Theorem**: If a preference satisfies the Continuity, Independence and Convexity axioms, and can be represented by a discounted expected utility function of the form: $u(c_0) + \rho \sum_{\omega \in \Omega} p_\omega u(c_{1 \omega}) \text{, }\rho > 0$, then u(.) is a concave function.

**Decreasing Marginal Utility**: if a concave utility function is twice differentiable, then u'' ≤ 0. Negative second order derivative for u(.) means **decreasing marginal utility**. 

### **11) Expected Utility**

The [**eleventh**](15470_L11.pdf) will advance our study into risk aversion.

#### 1) Risk Aversion

**Risk Aversion Definition**: a random number *x* is a fair gamble if $\mathbb{E}[x]$ = 0. An agent with expected utility u(.) is **risk averse** if $\mathbb{E}[u(w + x)]$ ≤ $\mathbb{E}[u(w)] \forall \mathbb{E}[x] = 0$ and strictly risk averse if the inequality is strict. A risk-averse agent always prefers a sure payoff over a risky payoff with the same mean. Formally: An agent is (strictly) risk averse if and only if u(·) is (strictly) concave. Let's relate the risk-aversion concept to what we've seen in previous classes. 

Risk Premium and Risk Aversion: let x be a fair gamble, u(.) be an agent's utility function with wealth *w*. The risk premium $\pi$ required by the agent to take the gamble is given by: $\mathbb{E}[u(w + x)] = u(w - \pi)$. The risk premium(also called **certainty equivalent** of the risky gamble) represents the *amount of wealth an agent is willing to give up in order to get rid of the risk*. We can measure risk aversion in many different ways. For example, there is the [**Arrow-Pratt**](https://policonomics.com/arrow-pratt-measure/) measure of risk aversion. The **inverse** of risk aversion is called **risk tolerance** T(w): T(w) $\equiv \frac{1}{A(w)} = - \frac{u'(w)}{u''(w)}$ For more and examples, refer to slides and Campbell's 1.2.3. 

**Pratt's Theorem**: given the setting: $u_1(.)$ and $u_2(.)$ denote the utility functions of two agents, 1 and 2, and $A_1(w)$ and $A_2(w)$ their absolute risk aversion, respectively, then the following statements are equivalent:

- $A_1(w) ≥ A_2(w) \forall w$,

- $u_1(u_2^{-1}(.))$ is concave,

- $\exists f(.)$ with $f'(.) > 0$ and $f''(.) ≤ 0$ such that $u_1(w) = f(u_2(w))$,

- $\pi_1 ≥ \pi_2$ for all w and fair gambles.

### **12) Portfolio Choice**

The [**twelfth**](15470_L12.pdf) 


## Useful Info

### Grading

Problem sets (10%). Midterm exam (30%). October 28th Final exam (60%)

### Course Overview:

### H1 (LS)

#### 1) Fundamental Theory of Asset Pricing

  1.1) [**Arrow-Debreu state-space framework**](https://en.wikipedia.org/wiki/Arrow%E2%80%93Debreu_model): suggests that under certain economic assumptions (**convex preferences, perfect competition, and demand independence**) there must be a set of prices such that **aggregate supplies will equal aggregate demands** for every commodity in the economy.

  1.2) [**Arbitrage**](https://en.wikipedia.org/wiki/Arbitrage): is the practice of taking advantage of a price difference between two or more markets: striking a combination of matching deals that capitalize upon the imbalance, the profit being the difference between the market prices at which the unit is traded. When used by academics, an arbitrage is a transaction that involves no negative cash flow at any probabilistic or temporal state and a positive cash flow in at least one state; in simple terms, it is the possibility of a risk-free profit after transaction costs. For example, an arbitrage opportunity is present when there is the opportunity to instantaneously buy something for a low price and sell it for a higher price.

  1.3) [**Fundamental theorem of asset pricing**](https://en.wikipedia.org/wiki/Fundamental_theorem_of_asset_pricing) (FTAP): provide necessary and sufficient conditions for a market to be arbitrage free and for a market to be complete. An **arbitrage opportunity** is a way of making money with no initial investment without any possibility of loss. Though arbitrage opportunities do exist briefly in real life, it has been said that any sensible market model must avoid this type of profit. The first theorem is important in that it ensures a fundamental property of market models. A **complete market** is one in which every contingent claim can be replicated. Though this property is common in models, it is not always considered desirable or realistic.

  1.4) [**Market completeness**](https://en.wikipedia.org/wiki/Complete_market): is a market with two conditions: 1) Negligible transaction costs and therefore also perfect information; 2) there is a price for every asset in every possible state of the world. In such a market, the complete set of possible bets on future* **states of the world** can be constructed with existing assets without friction. Here, goods are state-contingent; that is, a good includes the time and state of the world in which it is consumed. For ex: an umbrella today if it's not raining is different than an umbrella tomorrow if it's raining.

  1.5) [**State price density**](https://en.wikipedia.org/wiki/Stochastic_discount_factor) and [**risk neutral measure**](https://en.wikipedia.org/wiki/Risk-neutral_measure): 
  
  **State price density**(also Stochastic Discount Factor (SDF)) refers to the fact that the price of an asset can be computed by "discounting" the future cash flow $\widetilde{x_i}$ by the stochastic factor $\widetilde{m}$ and then taking the expectation.
  
  **Risk neutral measure**: is a probability measure such that each share price is exactly equal to the discounted expectation of the share price under this measure.

  1.6) [**Applications of no arbitrage**](https://en.wikipedia.org/wiki/Arbitrage#Arbitrage-free) : If the market prices do not allow for profitable arbitrage, the prices are said to constitute an arbitrage equilibrium, or an arbitrage-free market. An arbitrage equilibrium is a precondition for a general economic equilibrium. The "no arbitrage" assumption is used in quantitative finance to calculate a unique risk neutral price for derivatives.

  1.6.1) I Options and derivative securities
    
  1.6.2)  Neoclassical corporate finance: Objectives of a firm and value maximization

  1.7) [**Arbitrage Pricing Theory(APT)**](https://en.wikipedia.org/wiki/Arbitrage_pricing_theory): holds that the **expected return** of a financial asset can be modeled as a linear function of various factors or theoretical market indices, where sensitivity to changes in each factor is represented by a factor-specific beta coefficient. The model-derived rate of return will then be used to price the asset correctly—the asset price should equal the expected end of period price discounted at the rate implied by the model. If the price diverges, arbitrage should bring it back into line. 

#### 2) Optimal portfolio choice

  2.1) [**Preference theory**](https://en.wikipedia.org/wiki/Revealed_preference): is a method of analyzing choices made by individuals, mostly used for comparing the influence of policies on consumer behavior. Revealed preference models assume that the preferences of consumers can be revealed by their purchasing habits. 

  2.2) [**Optimal consumption/portfolio choices**](https://en.wikipedia.org/wiki/Portfolio_optimization):  is the process of selecting the best portfolio (asset distribution), out of the set of all portfolios being considered, according to some objective. The objective typically maximizes factors such as expected return, and minimizes costs like financial risk. Factors being considered may range from tangible (such as assets, liabilities, earnings or other fundamentals) to intangible (such as selective divestment).

  2.3) [**Risk aversion and portfolio choices**](https://en.wikipedia.org/wiki/Risk_aversion): is the behavior of humans (especially consumers and investors), who, when exposed to uncertainty, attempt to lower that uncertainty. It is the hesitation of a person to agree to a situation with an unknown payoff rather than another situation with a more predictable payoff but possibly lower expected payoff. 


  2.4) [**Portfolio choices in complete markets**](https://en.wikipedia.org/wiki/Modern_portfolio_theory)

  2.5) [**Stochastic dominance**](https://en.wikipedia.org/wiki/Stochastic_dominance): is a partial order between random variables.  It is a form of stochastic ordering. The concept arises in decision theory and decision analysis in situations where one gamble (a probability distribution over possible outcomes, also known as prospects) can be ranked as superior to another gamble for a broad class of decision-makers. It is based on shared preferences regarding sets of possible outcomes and their associated probabilities. Only limited knowledge of preferences is required for determining dominance. Risk aversion is a factor only in second order stochastic dominance. 
  
Stochastic dominance does not give a total order, but rather only a partial order: for some pairs of gambles, neither one stochastically dominates the other, since different members of the broad class of decision-makers will differ regarding which gamble is preferable without them generally being considered to be equally attractive.

  2.6) Portfolio separation theorems: [**Fisher's**](https://en.wikipedia.org/wiki/Fisher_separation_theorem) or [**Mutual Fund Separation Theorem**](https://en.wikipedia.org/wiki/Mutual_fund_separation_theorem)

  2.7) [**Mean-variance analysis**](https://corporatefinanceinstitute.com/resources/knowledge/trading-investing/mean-variance-analysis/): is a technique that investors use to make decisions about financial instruments to invest in, based on the amount of risk that they are willing to accept (risk tolerance). Ideally, investors expect to earn higher returns when they invest in riskier assets. When measuring the level of risk, investors consider the potential variance (which is the volatility of returns produced by an asset) against the expected returns of that asset. Mean-variance analysis essentially looks at the average variance in the expected return from an investment.

### H2 (LK): 

#### 3) Static equilibrium models of asset pricing

3.1) [**Market equilibrium**](https://en.wikipedia.org/wiki/Economic_equilibrium): is a situation in which economic forces such as supply and demand are balanced and in the absence of external influences the (equilibrium) values of economic variables will not change. For example, in the standard textbook model of perfect competition, equilibrium occurs at the point at which quantity demanded and quantity supplied are equal. [**Video**](https://www.khanacademy.org/economics-finance-domain/ap-macroeconomics/basic-economics-concepts-macro/market-equilibrium-disequilibrium-and-changes-in-equilibrium/v/market-equilibrium).

3.2) [**Capital Asset Pricing Model(CAPM)**](https://en.wikipedia.org/wiki/Capital_asset_pricing_model): is a model used to determine a theoretically appropriate required rate of return of an asset, to make decisions about adding assets to a well-diversified portfolio.

3.3) [**The Consumption-based Capital Asset Pricing Model(C-CAPM)**](https://en.wikipedia.org/wiki/Consumption-based_capital_asset_pricing_model): is a model of the determination of expected (i.e. required) return on an investment. The model is an extension of the capital asset pricing model (CAPM). Instead of basing the required return on the asset's performance relative to "the market's", it factors in consumption as a means of calculating the required return. (Consumption is spending for acquisition of utility as opposed to investing which is spending for acquisition of future income.) The logic: risky assets create uncertainty in consumption — how much a person will be able to spend becomes uncertain, because the level of wealth is uncertain due to investments in risky assets. The required return will then be linked to an estimate of how stock market returns change relative to consumption growth - beta below.

#### 4) Asymmetric information

4.1) [**Asymmetric information**](https://www.investopedia.com/terms/a/asymmetricinformation.asp) in financial markets, [**Grossman-Stiglitz model**](https://en.wikipedia.org/wiki/Grossman-Stiglitz_Paradox): the GS Paradox introduces the idea that information is costly, prices cannot perfectly reflect the information which is available, since if it did, those who spent resources to obtain it would receive no compensation, leading to the conclusion that an informationally efficient market is impossible. 

4.2) [**No-trade theorem**](https://en.wikipedia.org/wiki/No-trade_theorem): states that: 1) if markets are in a state of efficient equilibrium; 2) if there are no noise traders or other non-rational interferences with prices; and 3) if the structure by which traders or potential traders acquire information is itself common knowledge, then even though some traders may possess private information, none of them will be in a position to profit from it

4.3) [**Rational expectations**](https://en.wikipedia.org/wiki/Rational_expectations) and market efficiency: are model-consistent expectations, in that agents inside the model are assumed to "know the model" and on average take the model's predictions as valid. Rational expectations ensure internal consistency in models involving uncertainty. To obtain consistency within a model, the predictions of future values of economically relevant variables from the model are assumed to be the same as that of the decision-makers in the model, given their information set, the nature of the random processes involved, and model structure. The rational expectations assumption is used especially in many contemporary macroeconomic models.

4.4) Market micro-structure, [**Kyle model**](http://dhenriet.perso.centrale-marseille.fr/kyle.pdf), [**Glosten-Milgrom model**](https://www.semanticscholar.org/paper/BID%2C-ASK-AND'-TRANSACTION-PRICES-IN-A-SPECIALIST-Glosten-Milgrom/5827ca4a5ac97e717fb5768f313079e813cebe86)

#### 5) Dynamic modeling

5.1) Dynamic state-space framework, [**FTAP**](https://www.copsmodels.com/2000gtapconf/12hanslow.pdf): the FTAP model is a comparative static, computable general equilibrium model of the world economy that includesa treatment of foreign direct investment on a bilateral basis.

5.2) Arbitrage asset pricing in a dynamic model

5.3) Dynamic portfolio choice

5.4) Dynamic equilibrium models with complete markets, CCAPM

5.5) Dynamic equilibrium models with incomplete markets

[**Financial Asset**](https://en.wikipedia.org/wiki/Financial_asset):  is a non-physical asset whose value is derived from a contractual claim, such as bank deposits, bonds, and stocks. Financial assets are usually more liquid than other tangible assets, such as commodities or real estate, and may be traded on financial markets.


## Ross' Notes

### Introduction

A pillar of economics is the ownership of claims to [**assets**](https://en.wikipedia.org/wiki/Asset). Finance is about valuing those claims, i.e., determining the prices of assets. The financial markets create continuous and voluminous records of these valuations.

We begin our study of finance with stock market data. The prices displayed are the prices at the close of the month for one share of stock quoted on exchanges where the stocks are traded throughout the day. What is it that each party thinks they can get from the transaction? In other words, what do you gain or lose from buying or selling an asset? Given two consecutive dates, t and t+1, say one month apart, consider the gain over the period from the purchase of \$1 of stock. If the price per share is $p_t$, then \$ 1 will buy $\frac{1}{p_t}$ shares of stock at time *t*. 

If the investor holds these shares over the month from t to t+1, then the price of these shares will have changed to: $p_{t+1}$ and these shares would then be worth: $\frac{p_{t+1}}{p_t}$. Hence, the **profit** would be:

\[ \frac{p_{t+1}}{p_t} - 1 = \frac{p_{t+1} - p_t}{p_t} \]

This is the [**capital gain**](https://en.wikipedia.org/wiki/Capital_gain) (or loss, if negative), the percentage increase (decrease) in the value of the asset over this period. In addition to the change in the value of the asset, assets often have an associated cash flow which is paid to the holder. For stocks the attendant cash flow is called a [**dividend**](https://en.wikipedia.org/wiki/Dividend). If this stock paid a dividend per share of $d_t$ at the end of the period(at $t+1$), then \$ 1 of investment at t would entitle the holder to $\frac{d_t}{p_t}$ dollars of dividends per \$ 1 investment.

The **total rate of return** over period t would be:

\[ R_t \equiv \frac{p_{t+1}- p_t}{p_t} + \frac{d_t}{p_t} \]

The **gross return** would be 1 + $R_t$.

Letting {$x_1,...,x_n$} denote a sequence of n data points, we define the sample mean, μ, the standard deviation, σ, the skewness, η, and the kurtosis, κ, as follows:

\[ mean = \mu = \frac{1}{n} \sum_i x_i\]

\[ standard \, deviation = \sigma \sqrt{(\frac{1}{n-1})\sum_i (x_i - \mu)^2}\]

\[ skewness = \eta = \frac{n}{(n-1)(n-2)} \sum \frac{x_i - \mu}{\sigma}^3 \]

\[ kurtosis = \mathcal{k} = \frac{n(n+1)}{(n-1)(n-2)(n-3)} \sum \frac{x_i - \mu}{\sigma}^4  - \frac{3(n-1)^2}{(n-2)(n-3)} \]

\[ t-statistic = \frac{\mu}{(\frac{\sigma}{\sqrt{n}})}  \]

**Risk-premia**: the difference between risky-assets and the treasury interest rates(risk-free).

**Equity risk premium**: difference between stocks and risk free interests rates.

This influences the decision to invest in risky or not risky assets.

- **Cross Section Betas**: the regressions of each stock on the S&P 500 index indicate significant correlations. The coefficients are significant and, generally positive, and this is true not only for our sample but for the market as a whole. This is an important stylized fact about the returns on these risky securities and the theories we will develop will take account of this observation.

- **Time Series Properties: Efficient Market Theory:**  the absence of a pattern in the return data is consistent with one of the central intuitions of modern finance. If the market accurately processes information, then we describe such market as informationally efficient. 
A **market is efficient** if prices “reflect” the information available to investors. There is no easy money: the efficient market theory would say that no trading strategy could beat simply buying and holding an asset or some portfolio of assets - assuming that  both the trading strategy and the buy and hold strategy had the same inherent risks(standard deviations and other measures of risk).

### **Summary of Introduction to Finance**

Summarizing this introduction to finance, then, we have discovered three stylized facts about asset returns which the theory of finance will have to address.

i) Efficient Markets: Asset returns are, apparently, quite random and unpredictable.

ii) Positive Risk Premiums: On average, the risky stock market appears to have higher expected returns than less risky or volatile Treasury rates of return.

iii) Significant ‘betas’: Random asset returns appear to be cross correlated.

### **Chapter 1: The Arrow Debreu State Space Framework**

We need to develop a framework within which random financial choices are compared and made:

Two **time periods**: 0 and 1. Trades happen at 0, payoffs occur by time 1. We model **uncertainty** by using a finite state space approach, given the perspective ex-ante at 0, there is a **finite set of states of nature** that could possibly occur. The **state space** consists of:

\[ \Omega = \{\theta_1,...,\theta_m\} \]

Needless to say, these states are mutually exclusive. We define also a **measure(probability vector)**:

\[ \pi = \{ \pi_1,...,\pi_m \}  \]

Over the states of nature, where each $\pi_i$ is interpreted as the probability that the state of nature will be $\theta_i$ at time 1. The sum of all measures add up to 1. 

Knowing this, we can model any r.v. such as the time 1 price of a stock as a function from $\Omega$ to the line R. The price of the $j^{th}$ stock at time 1 can be modeled as:

\[ x^j = x^j (\theta) \]

Since we have a finite state space, this is equivalent to representing the time 1 dollar price of asset j as a vector:

\[ x^j = \{ x^j (\theta_1),...,x^j(\theta_m)\} = \{ x_{1j},...,x_{mj}  \}  \]

Using a matrix, we can represent all the possibilities of period 1 prices for the *n* assets as

\[ X = [x_{ij}] = \begin{bmatrix}
    x_{11} & \dots  & x_{1n} \\
    \dots & \dots  & \dots \\
    x_{m1} & \dots  & x_{mn}
\end{bmatrix} \]


**Payoffs**: $x_{ij}$, the quantities, are the time 1 prices of the assets in the different states and they are cum dividends and cashflows. Each column of X displays the payoffs on the assets traded in the market as a function of the state of nature. The matrix X is called the **Arrow-Debreu tableux** or **State-space tableau**.

Each of the traded assets has a current, time 0 price, $p_j$, and the vector of such prices is given by the n vector:

\[ p = <p_1, \dots, p_n > _{1 \times n}  \]

Assuming the prices are nonzero, we can write the (mxn) matrix of
gross returns across assets and states, R, as: R = $XP^{-1}$ where P is the diagonal matrix with entries $p_i$ on the diagonal.

#### **The Individual Portfolio-Consumption Problem**

Given wealth today = $w_0$, wealth at time 1 = $w_1$, as well as an endowment of holdings of stocks $\phi_i$, then their endowment vector is

\[ \varphi = \{ \varphi_0, \dots, \varphi_n \} \]

and their current wealth is given by:

\[ w_0 = \varphi_0 + \sum \varphi_i \rho_i = \varphi_0 + \varphi_\rho  \]

To move the wealth in the next period, the investor can purchase only the *n* assets. Suppose the investor buys a vector of stocks:

\[ a = (a_1,\dots,a_n)_{n \times 1} \]

$a_i$ denotes the quantity of shares bought at the period 0. The budget constraint is given by: 

\[ c_0 + pa = c_0 + \sum p_i a_i ≤ w_0  \]

The wealth not consumed in the first period will be denoted by $\omega_0$, so that $\omega_0$ = $w_0$ - $c_0$. The budget constraint then is $pa ≤ w_0$.

Imagine an asset has negative payoff. What should we do? A practical way this is accomplished in the market is for the short seller to borrow this asset at time 0 from another investor and then sell it. This is called a short sale since the seller of the asset is ‘short’ it, i.e., the seller has borrowed it and owes it back to a lender.

The vector **a** is a quantity, but it is often convenient to redefine the variable quantities of the portfolio problem in terms of how much of current wealth ($w_0$) is invested in each asset. The proportion of current wealth (not consumed) and invested in asset *i* is given by:

$\alpha_i$ = $\frac{\rho_i a_i}{\omega_0}$

Given that the investor has two possibilities: consume or invest; the inequality in the budget constraint is an equality and the proportions must sum to 1:

\[ \sum \alpha_i = \alpha e = 1   \]

**Portfolio**: is an n-vector whose entries, represented by $\alpha_j$, sum to one:

\[ \sum \alpha_j = 1 \]

But not all elements have to be ≥ 0. When time passes and we arrive at time = 1, the wealth of the investor will depend on **which state has happened**. At time 1, the payoff in state of nature θi from holding aj units of stock j is given by: $a_j x_{ij}$. The total payoff or wealth in state $\theta_i$ is given by:

\[ w_1(i) = \sum_j a_j x_{ij} \]

Thus, the vector of wealth payoffs at time 1 in state $\theta_i$ is given by

\[ w_1 = \{ w_1(i) = X_a\} \]

Different portfolio choices, $\alpha$, and current consumption choices, $c_0$, will result in different terminal wealth vectors, $w_1$.

#### **The Two State, Two Asset (Binomial) Example**

Given m(states) = 2 and n(assets) = 2. Given the two future states $w_1(1)$ and $w_1(2)$. 

The original form of budget constraint is $p_1 a_1 + p_2 a_2 = \omega_0$ and given this BC, the set of possible payoffs is the set:

\[ w_1(i) = a_1X_{i1} + a_2X_{i2} \]

Which is the line in the figure that goes through the two points where there is only investment in each of the assets.

```{r, echo=FALSE}
library(png)
library(grid)
setwd("~/Dropbox/R/Site-Gabriel/public/MIT")
img <- readPNG("20.png")
grid.raster(img)
```

If the agent only buys asset 1:

\[ \{ (\frac{\omega_0}{p_1})X_{11},(\frac{\omega_0}{p_1})X_{21}\} = \omega_0 \{ R_{11},R_{21} \}  \]

Because $R = XP^{-1}$ (X is the payoff in state i of asset j). If the investor only buys asset 2:

\[ \{ (\frac{\omega_0}{p_2})X_{12},(\frac{\omega_0}{p_2})X_{22}\} = \omega_0 \{ R_{12},R_{22} \}  \]

About short-selling: on the **budget line** between the two points the wealth is divided between them.  On the budget line to the left of the first asset, though, the investment in the first asset exceeds $\omega_0$ and the additional wealth comes from short selling the second asset.  By having the budget line end at the two axes we are allowing short sales but not to such an extent that they risk bankruptcy.

“the investor is free to purchase any portfolio so long as it satisfies the budget constraint” by appending the additional constraint that wealth be non-negative in every state. Thus, the feasible, F, set of choices for the investor has the form:

\[ F = \{a|pa ≤ \omega, X_a ≥ 0\} \]

#### **The investor's problem**


Suppose that there is some investor who actually does have an optimal portfolio and consumption choice. Label these choices <$\alpha^*, c^*$>. Since they are optimal, they can't be improved. Since they must be feasible, they satisfy the budget constraint:

\[ c^* + pa^* = w_0 \]

or

\[ pa^* = \omega_0 ^* \equiv w_0 - c^*\]

Now consider any proposed improvement on the portfolio portion of this position. Such an improvement would be an *n* vector of holdings, $\eta$, such that the altered position is feasible:

\[ p(a* + \eta) ≤ \omega_0 ^* \]

or 

\[ \rho \eta ≤ 0 \]

Any portfolio/position that satifies the above constraint, that is, **uses no wealth**, is said to be **self-financing**. 

**Arbitrage portfolio**: is an *n* vector $\eta$, such that:

\[  \rho \eta = 0 (it costs nothing to buy) \]

As a consequence of the change, $\eta$, the wealth vector at time 1, $w_1$ has been altered to

\[ w_1 + X\eta \]

We do know that $\eta$ can't be an improvement on $a^*$. That implies that $\eta$ cannot increase wealth in any state of nature unless it 
lowers wealth in at least one other state. If the arbitrage portfolio $\eta$ costs nothing or a negative amount today: $\rho \eta ≤ 0$.

### **Options, Derivatives and Other Financial Instruments**

**Call Option**: gives the holder the **right**, but not the obligation, to purchase the security for a stated amount, **K**, the **exercise/strike** price at some time in the future called the **maturity**. Since it gives the holder the right to purchase the security for K, if the price of the security at the time of exercise, X, is greater than the strike price, K, the holder will exercise the option, i.e., buy the security for K and sell it for X. The difference, then, X - K, is the value of the option. Since this is a right and not an obligation, if X < K, holders will not exercise their right of purchase and the option will expire without being exercised. Thus, the formula for the payoff on a call option at maturity is:

\[ C(X:K) = max[X-K,0] = [X - K]^+ \]

This payoff can be seen in the following picture: 

```{r, echo=FALSE}
library(png)
library(grid)
setwd("~/Dropbox/R/Site-Gabriel/public/MIT")
img <- readPNG("21.png")
grid.raster(img)
```

**Put options**: gives the holder the right, but not the obligation, to sell the security for a stated amount, K, the **exercise price** or **strike price** at some time in the future called the **maturity**.

If the value of the security at maturity, X, falls short of the exercise price, then the holder will exercise the put, purchasing the security for its market price of X and selling it to the **writer**. This results in a profit at maturity of K - X. The **payoff of a put option at maturity** is:

\[ P(X;K) = max[K - X,0] = [K - X]^+ \]

While the holder of an option has the right to exercise it, the seller or writer of the option has an obligation. In practice, most options are settled in cash, which means that rather than buying or selling the security, the **cash value of the option** at maturity, say $[X - K]^+$ for a call, is **paid by the writer to the holder**.

```{r, echo=FALSE}
library(png)
library(grid)
setwd("~/Dropbox/R/Site-Gabriel/public/MIT")
img <- readPNG("22.png")
grid.raster(img)
```

**In the money**: call: X > K; put: K > X.

**Out of the money**: call: X < K; put K < X.

**At the money**: X $\equiv$ K.

**Put** and **call** options are examples of **derivatives**: a type of security whose value depends on the value of another security, called the **primitive** or **underlying security**. 

### **Combining Options**

A **forward** or a **future** contract commits the long (the ‘buyer’) to the purchase of
a specified quantity of some good or asset at a specified price, the futures or forward price and at
some fixed future date, the maturity, and commits the short (the ‘seller’) to the sale of that good or
asset. The difference to an option is that both parties are **committed** to doing the trade. The equilibrium is reached by adjusting the forward or future price. This price means that the forward price must be set so that the value of the contract today is zero.

\[ S_1 - F_1 \]

\[ Value \, of \, forward \, contract = (\frac{1}{1+r})E^* [S_1 - F_1] = 0 \]

\[ \implies E^*[S_1] = E^*[F_1] = F_1 = S_0(1+r) \]

\[ F_1 = E^*[S_1] \]

Forward contracts settle as we have described them, at the end of the period. Futures contracts, on the other hand, mark to market, which means that they must settle with a cash payment every day and, sometimes, even intraday. By settling we mean that each day money changes hands as the futures price changes with changing expectations about the future value of the contract. If tomorrow’s futures price is higher than today’s, then the short must give the difference to the long and if it is lower the long must pay the difference to the short. By this settling process, the value of the contract is continuously kept at zero. A forward contract, by contrast, is only settled at maturity and if the final price, $S^1$.

#### **Put-Call Parity**

A riskless bond that pays K for sure plus a call with an exercise price of K on an asset is equivalent to or replicated by a put with an exercise price of K and a holding of the underlying asset:

\[ \frac{K}{1+r} + C(S_o,K) = S_o + P(S_0,K) \]

Where $S_0$ is the current price of the asset and *r* is the riskless rate.



### **The Capital Asset Pricing Model(CAPM)**

- **CAPM** is the workhorse model of equilibrium in the capital markets: it is a complete equilibrium model and the source of some of the most important intuitions about the interplay between *risk and return*. 

We need some assumptions to yield some testable hypotheses for the general n-asset portfolio choice problem. To obtain the CAPM, restrictions are imposed that reduce the analysis to a *choice between return as measured by the expected return and risk as measured by the variance or the standard deviation*. The basic setup is one in which the individual **finds an optimal portfolio by trading off the expected return on the portfolio against its standard deviation**.

The individual maximizes expected utility: E[U(x)] = $\int U(x) dF_x (x)$. We would like this to be a function of solely the mean and the variance/standard deviation of x:

\[ E[U(x)] = \int U(x)dF_x(x) = G(\mu, \sigma) \]

Where for any x: 

\[ \mu = E[x] = \int xdF_x(x) \]

and

\[ \sigma^2 = E[(x - \mu)^2] = E[x^2] - \mu^2 = \int (x - \mu)^2 dF_x(x) \]

This illustrates the aforementioned interplay between risk and return. We start by *restricting preferences*:

- Quadratic utility: by restricting the utility function to be quadratic, then, given its uniqueness up to an affine transform, the general form is: $U(w) = w - \frac{c}{2}w^2$. This is graphed by:

```{r, echo=FALSE}
library(png)
library(grid)
setwd("~/Dropbox/R/Site-Gabriel/public/MIT")
img <- readPNG("33.png")
grid.raster(img)
```

Interpretations: 

- If c = 0, we have a risk neutral utility function.

- The range can never be w > 1/c. 

- The coefficient of Absolute Risk Aversion is: A(w) = $- \frac{U''(w)}{U'(w)} = \frac{c}{1 - cw}$. It rises in the relevant range (i.e. w < 1/c). 

These interpretations allow us to write the expected utility as a function of mean and variance:

\[ E[U(x)] = \int U(x) dF_w (x) \]

\[ E[U(x)] = \int [x - \frac{c}{2} x^2] dF_w (x)  \]

\[ \int dF_W(x) - \int\frac{c}{2}x^2 dF_w (x)  \]

\[ = \mu - \frac{c}{2}[\mu^2 + \sigma^2]  \]

\[ = G(\mu, \sigma)\]

Given the expected utility depends only on the mean and the variance, we can draw indifference curves for this utility function. 


#### **Multivariate Normality**

Asset returns, *x*, follow a multivariate normal distribution. Basic portfolio problem is: (pg 191)







## Leonid's Notes {.tabset}

### Symbols

#### 1.1 The Model

- Probability Space: ($\Omega, \mathcal{F}, \mathcal{P}$) (Sample Space, Set of Events, Assignment of Probabilities).

- $\mathcal{T}$ = $\{ 0,1,...,T \}$: **trading dates**.

- $\mathbb{F}$: filtration. Used to model the information available at a given point that's important in the formalization of random processes. 

- $S_{0,0}$: a Security 0 at time 0. Security 0  is a "riskless security". 

- $S_{N,t}$: risky securities from 1,...,N. 

- $\delta_n$: the dividend process. Where $\delta = (\delta_0, ..., \delta_N) \in \mathcal{L}^{N+1}$. 

- $S_n$: ex-dividend price process. Where $S = (S_0, ..., S_N) \in \mathcal{L}^{N+1}$.

- $\theta$: the trading strategy is an adapted process such that $\theta_T$. Adapted process is when you have to close your position by time = T. 

- **Cash flow**: an adapted process $c \in \mathcal{L}$. 

- **Self-financing trading strategy**: one that finances a cash flow $c_t$ with $c_1 = c_2 = ... = c_{T - 1} = 0$.

- $W_t$: Wealth Process corresponding to a self-financing trading strategy. 

#### 1.2. Motivation

- **Martingale**: linear pricing rule.

- $B_t = S_{0,t}$: **discounting process**. We discount the stock price and the wealth process by $B_t$.

- **Q**: Equivalent Martingale Measure. It is equivalent to P because both Q and P assign 0 probabilities to the same events. It is called **martingale** because the discounted price process of any stock is a martingale under Q. 

- Discounted price processes: $S_t = E_t^Q [(\frac{B_\tau}{B_t})^{-1}S_t]$, which defines that price today is a linear function of future cash flows. 

### Lecture 1 - Arbitrage and Martingales: FTAP

#### 1.1 The Model

Setting:

- **Probability space**: ($\Omega, \mathcal{F}, \mathcal{P}$) (Sample Space, Set of Events, Assignment of Probabilities).

- **Set of trading dates**: $\mathcal{T} = \{0,1,..., T\}$.

- A **filtration** $\mathbb{F}$. Filtrations are used to model the info available at a given point that's important in the formalization of random processes. 

- N + 1 **securities** indexed by $n = 0,...,N$. 

    a) Security 0 is "riskless" security. It does not pay dividends. Price is $S_{0,0} = 1$ at time 0. Price at t > 0 is: $S_{0,t} = (1 + r_{t - 1}) S_{0,t-1}$, where $r_{t-1}$ is the short rate.

    b) Risky securities: $1,...,N$. Security $n$ has a dividend process $\delta_n$ and an ex-dividend price process $S_n$. We set $\delta$ = ($\delta_0, ... , \delta_N$) $\in \mathcal{L}^{N + 1}$ and S = ($S_0, ..., S_N$) $\in \mathcal{L}^{N+1}$.
    
Dividends and prices at time = t depend only on information available up to time *t*. 
    
**Definition 1.1.1**: a *trading strategy* is an adapted process $\theta = (\theta_0, ..., \theta_N) \in \mathcal{L}^{N + 1}$ such that $\theta_T = 0$. This means that the agent has to close his position by time = T. $\theta_{n,t}$ represents the share of security *n* that the agent holds after trading at time *t*. 

**Definition 1.1.2**: a *cash flow* is an adapted process c $\in \mathcal{L}$. 

**Definition 1.1.3**: a trading strategy $\theta$ finances a cash flow c $\iff \forall$ t $\in \{1,...,T \}}$:

\[ c_t = \theta_{t-1}(S_t + \delta_t) - \theta_t S_t\]

and 

\[ c_0 = - \theta_0 S_0 \]

Where: $S_t$ is the pricing process; $-\theta_t S_t$ is the cost of acquiring new securities; $\theta_{t-1}(S_t + \delta_t)$ are the proceeds. The *proceeds minus the cost have to finance the cash flow* $c_t$. This is the dynamic budget constraint.

**Definition 1.1.4**: a cash flow is *marketable* $\iff$ it is financed by a trading strategy $\theta$. The marketable cash flows are denoted by M. 

**Definition 1.1.5**: a trading strategy $\theta$ is called self-financing $\iff$ it finances a cash flow $c_t$ with $c_1 = c_2 = ... = c_{T-1} = 0$. In other words, a self-financing strategy does **not** generate cash inflows/outflows except for the initial investment and the terminal cash flow. The self-financing condition can be: $\theta_{t-1}(S_t + \delta_t) - \theta_t S_t = 0$, t = 1,...,T - 1. 

$W_t$: the wealth process corresponding to a self-financing trading strategy. We know that: $W_t = \theta_t S_t$. Using the self-financing condition, we find:

\[ W_t = \theta_t S_t = \theta_T S_t - \theta_{t-1} S_{t-1} + \theta_{t-1} S_{t-1} = \]

\[ \theta_{t-1} (S_t + \delta_t) - \theta_{t-1}S_{t-1} + \theta_{t-1}S_{t-1}  = W_{t-1} + \theta_{t - 1}[(S_t - S_{t-1}) + \delta_t] \]

Thus:

\[ W_t = W_0 + \sum_{u=1}^t \theta_{u-1} [(S_u - S_{u-1}) \delta_u\]

#### 1.2 Motivation: Portfolio Choice

**Objective**: WTS that to have a well-defined portfolio chioice problem, market prices must satisfy certain conditions. We assume No Arbitrage. This is the same as assuming **martingale**: the linear pricing rule. This is also the same as assuming an existence of solution to a portfolio choice problem. 

The objective for the agent is to choose an adapted trading strategy $\theta_t$ to maximize:

\[ E_0 [U(W_T)] \text{ subject to } W_T ≥ 0 \]

We define a discounting process $B_t = S_{0,t}$. If we discount the stock price and the wealth process by $B_t$, $\hat{W}_t \equiv W_t/B_t$, $\hat{S}_{1N,t} \equiv B_t^{-1} \hat{S}_{1N,t}$.

The new optimal portfolio choice problem is to maximize:

$E_0 [U(B_T \hat{W}_T)] \text{ subject to } W_T ≥ 0$

We assume there is an interior solution to the problem. Let's consider a *perturbation* of the optimal portfolio policy in the direction of $\eta_t$, so the perturbed policy is $\theta_{1N,t}^{-1}$ + $\epsilon \eta_t$. The wealth process under the perturbed policy is given by:

\[ \hat{W}_t(\epsilon) = \hat{W}_t^\ast + \epsilon \sum_{u=0}^{t-1} \eta_u (\hat{S}_{1N,u+1} - \hat{S}_{1N,u})\]

Optimality of the policy $\theta_{1N,t}^\ast$ implies that the derivative of the optimal portfolio choice with perturbation = 0. So there's no inclination effect of perturbation and we remain in optimality. 

We do some algebra to arrive at an **Equivalent Martingale Measure**.

#### 1.3 The FTAP


#### 1.4 Security Prices and State Prices

The state prices incorporate three elements:

1) Investors' (subjective) probability beliefs.

2) Time value of money (i.e. discounting). 

3) Investors'risk-aversion.

In order to separate the three elements we define two concepts:

i) **State-Price Density**: state price / probability, incorporating only discounting and risk-aversion.

ii) **Equivalent Martingale Measure**: incorporates only investors' probability beliefs and risk-aversion. 

#### 1.5 State-Price Density

The FTAP states that NA implies the existence of a strictly increasing linear function $\Psi$ : $\mathcal{L} \rightarrow \mathbb{R}$ such that $\Psi (c) = 0 \forall c \in M$. 

\[ \Psi (c) = K_0 \sum_{t = 0}^T \psi_tc_t = E_0 [\sum_{t=0}^T \pi_t c_t] \]

The last part of the above equation means that the linear function is the expectation as of time 0 of the sum over periods of $c_t$ times an adapted process $\pi_t$. We refer to $\pi$ as a **state-price density**(SPD) process. 

$\Psi (c)$ = the time 0 value of the cash flow *c*, measured at state prices. This can be written as the expectation of the cash flow adjusted by the SPD. We **adjust by the SPD** to account for discounting and risk-aversion. 

From equation 1.5.6 we get that the price adjusted for discounting and risk-aversion is **martingale**. To extend the martingale property to dividends we define the **gain process**:

\[ G_t = S_t + \sum_{s=1}^t \delta_s \]

And if we adjust this by the SPD:

\[ G_t^\pi = \pi_t S_t + \sum_{s=1}^t \pi_s \delta_s \]

#### 1.6 Equivalent Martingale Measure

Now we will adjust for risk-aversion through the probabilities, not through SPD. We define a probability measure Q such that

$ \Psi (c) = E_0^Q [\sum_{t=0}^T \frac{c_t}{B_t}] $

We adjust for discounting by dividing by the price of the riskless security. **Q is the EMM**, a.k.a. the **risk-neutral probability**. 

The difference between SPD and EMM: given both equations:

\[ SPD: \Psi (c) = E_0 [ \sum_{t=0}^T \pi_t c_t ] \]

\[ EMM: \Psi (c) = E_0^Q [\sum_{t=0}^T \frac{c_t}{B_t}] \]

In the SPD equation, probability beliefs work through the expectation, and discounting and risk-aversion through the SPD. In the EMM equation, probability beliefs and risk-aversion work through the EMM, and discounting through the riskless security.

Intuitively the martingale property means that the return on an asset cannot be higher than the riskless rate with probability 1 or there would be an arbitrage.

#### 1.7 Appendix: Mathematical Preliminaries

### Lecture 2 - Applications of FTAP, Dynamic Models

#### 2.1. Arbitrage Pricing

##### 2.1.1. Redundant Securities

A trading strategy $\theta$ replicates a cash flow c $\iff \forall t ≥ 1$ : $c_t = \theta_{t-1}(S_t + \delta_t) - \theta_tS_t$. In other words: $\theta$ replicates c $\iff \forall$ t ≥ 1, *c* coincides with the cash flow financed by $\theta$. 

**Redundant security**: is one which its dividend process $\hat{\delta}$ and price process $\hat{S}$ can have its cash flow *c* ($c_s = \hat{\delta}_s$ for s < T) replicated by a trading strategy $\hat{\theta}$ and $c_T = \hat{\delta}_T + \hat{S}_T$. From NA: the price of a redundant security has to be equal to the value of the replicating strategy. Thus, a redundant security can be priced off the existing securities. 

##### 2.1.2. Complete Markets

**Complete markets**: the ones in which **all** cash flows can be replicated. Thus, all new securities are redundant and can be replicated. Markets are complete $\iff$ state prices are unique. 

##### 2.1.3. Option Pricing

**Strike price(K)**: the prespecified price. The prespecified time is the *maturity* of the option and is denoted by $\tau$. 

#### 2.2 Portfolio Choice

**Consumption Plan**: an adapted process c $\in \mathcal{L}^+$. Consider an investor who consumes over time. His preferences are given by a strictly increasing and continuous utility function $U: \mathcal{L}^+ \rightarrow \mathbb{R}$. We will often assume that U is a time-additive expected utility, i.e.:

\[ U(c) E_0 \sum_{t=0}^T u_t(c_t)\]

The investor has wealth W at t = 0. Given a consumption plan *c*, we denote by c - W the cash flow that is equal to $c_t$ for t ≥ 1 and $c_0 - W$ for t = 0. The cash flow c - W must be marktable, i.e. must belong to M. 

A consumption plan c is **feasible** $\iff$ c - W $\in$ M $\iff c \in M + W$. The investor's problem($\mathcal{P}$) is $max_c U(c)$ such that $c \in \mathcal{L}^+ \cap (M + W)$. The **optimal consumption plan** is the one that solves $\mathcal{P}$. 

There are two approaches to solving $\mathcal{P}$: i) *martingale approach*: based on the FTAP and the existence of state prices; ii) *dynamic programming*: based on stochastic dynamic programming (traditional). 

##### 2.2.1. Martingale Approch; Existence and Characterization

$\mathcal{P}$ has a solution $\iff$ there is NA.  

#### 2.3 Equilibrium Asset Pricing

##### 2.3.1 Contingent Claims Equilibrium

**Contingent claims**: for each node, there exists a security which pays one unit of consumption at that node, and which is traded in period 0. 

A contingent claims equilibrium is a price process $\psi \in \mathcal{L}$ and a vector of consumption plans ($c_1, ..., c_I$)$\in \mathcal{L}_I$ such that:

1) (optimization) $c_i$ is optimal for agent *i*. 

2) (market-clearing) c = e. 

AKA Arrow-Debreu equilibrium. 

##### 2.3.2 Securities Market Equilibrium

**Securities Market Equilibrium**: a price process S $\in \mathcal{L}^N$ and a vector of trading strategies ($\theta_1, ..., \theta_I$) $\in \mathcal{L}^N$ such that:

i) (optimization)$\theta_i$ is optimal for agent *i*. 

ii) (market-clearing) $\sum_{i=1}^I \theta_i = x$, $\sum_{i=1}^I (c_i - e_i) - x \delta = 0$. 

There are some differences in this type of equilibrium. For ex: AD goods cannot be defined. 

But SM Eq implies that agents' maximization problems have a solution. Therefore, there is no arbitrage. 

**To obtain the portfolio choice when the markets are dynamically complete we replace the dynamic budget constraint by a single static constraint.** 

### Lecture 3 - Portfolio Choice Using Dynamic Programming

Portfolio choice is harder when markets are incomplete due to non-tradable risks or constraints. The standard approach to such problems uses dynamic programming. 

#### 3.1 The Value Function

**Dynamic Programming**: decompose the multi-period problem into a sequence of one-period problems and solve by backwards induction. The decomposition is most convenient when the investor has time-additive expected utility:

\[ U(c) = E_0 \sum_{t = 0}^T u_t (c_t) \]

We consider the investor's problem at time *t*. The investor has wealth $W_t$ and chooses a trading strategy $\theta_s$, s ≥ t, to solve:

\[ max_{\theta_s} E_t \sum_{s=t}^T u_s (c_s) \]

such that

\[ c_s = \theta_{s-1} (S_s + \delta_s) - \theta_s S_s \]

and 

\[ c_t = W_t - \theta_t S_t \]

**Value function**: the maximum value of the investor's problem ($\mathcal{P}$), denoted by $V_t(W_t)$. 

**Bellman's principle of optimality**: for a function to be the value function, it has to satisfy $J_T(W_T) = u_T (W_T)$ and has to solve the Bellman equation:

\[ J_t(W_t) = max_{c_t,\theta_t} [u_t (c_t) + E_t (J_{t+1}(W_{t+1}))] \text{ aka }\mathcal{B_t}\]

Subject to $W_{t+1} = \theta_t (S_{t+1} + \delta_{t+1})$ and $c_t = W_t - \theta_t S_t$. 

We can replace the multi-period problem $\mathcal{P}$ by a sequence of one-period problems and solve them by proceeding backwards. Both problems are equivalent in the sense that they have the same maximum value and optimal solution. The one-period problems are obtained by considering "one-period deviations", i.e. follow a non-optimal strategy in one period and the optimal strategy subsequently. The one-period deviations are not optimal $\iff$ no deviations are optimal.

#### 3.2 Properties of the Value Function

The value function is similar to the utility function. 

#### 3.3 Simple Examples with Explicit Solutions

### Lecture 4 - Empirical Facts and Puzzles

**Unconditional Properties (average behavior)**:

- Real stock returns have high mean and variance.

- Average risk-free rate is low.

- Real consumption growth has very low volatility.

- Real consumption growth and stock returns have correlation of approximately 0.3.

- Real dividend growth is more volatile than that of consumption, but much less volatile than stock returns. 

- Correlation between consumption and dividend growth is approximately 25%. 

**Conditional Properties (predictability)**:

- Excess stock returns are forecastable.

- Consumption growth is not well forecast by its own history or by the price-dividend ratio.

- Dividend growth is not well forecasted by the log of the price-dividend ratio.

#### 4.1 A Benchmark Model

#### 4.2 Puzzles

#### 4.3 First Attempt: Recursive Preferences

**Epstein-Zin**: assumes that v(x) = $x^\alpha$, where $\alpha$ is generally different from $\theta$. This model of preferences disentangles risk aversion from elasticity of intertemporal substitution, which helps match quantitative properties of asset prices and consumption data and is often a useful feature to build into a model. 

### Lecture 5 - Excess volatility

#### 5.1 Motivation

#### 5.2 Preferences over Relative Consumption

Goal: generating a time-varying market price of risk. 

#### 5.3 Calibration and Quantitative Performance

#### 5.4 Internal Habit

We take the addictions as internal, not exogenous. Constantinides considers a model in which agent's habit is a linear function of **past consumption**. Finding: **agent's consumption is much smoother than  wealth**. Intuition: when an agent experiences a positive shock to wealth, consumption is not immediately increased as that increase future habit levels and lowers utility. Hence, consumption increases gradually, smoothing shocks to wealth. So consumption smooths shocks to wealth, but wealth is a claim to future cash flows. How is it that wealth is more volatile than consumption? Consumption growth is auto-correlated $\implies$ at long horizons its volatility is much higher than at short horizons. Constantinides(1990) assumes that consumption is chosen endogenously and it comes out autocorrelated: a drawback, given empirical evidence that autocorrelation is weak. 

#### 5.5 Recursive Utility

The price of the long-run growth risk is relatively high if $\phi$ is close to one(shocks to the growth rate are very persistent). With $\psi$ > 1, stock market returns load positively on shocks to consumption growth rate, and these shocks carry a positive market price of risk $\implies$ persistent shocks to consumption growth rate contribute positively to the equity premium. 

### Lecture 6 - Static Competitive Models

#### 6.1 Asymmetric Information

##### 6.1.1 The Model

##### 6.1.3 Rational Expectations Equilibrium

Grossman-Stiglitz paradox: if in the end, the informed and uninformed get the same allocation and information acquisition is costly, why would someone acquire information?


### Lecture 7 - Non-Competitive Models

#### 7.1 Introduction












