<!DOCTYPE html>
<html lang="en-us">
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
  <meta property="og:title" content=" Introduction to Benford&#39;s Law basics &middot;  Gabriel Voelcker" />
  
  <meta name="theme-color" content="#hexcolor" />
 
  <meta property="og:site_name" content="Gabriel Voelcker" />
  <meta property="og:url" content="/post/benford-s-law-using-r/" />
  
  
  <meta property="og:type" content="article" />
  
  <meta property="og:article:published_time" content="2018-08-10T00:00:00Z" />
  
  

  <title>
     Introduction to Benford&#39;s Law basics &middot;  Gabriel Voelcker
  </title>

  <link rel="stylesheet" href="/css/bootstrap.min.css" />
  <link rel="stylesheet" href="/css/main.css" />
  <link rel="stylesheet" href="/css/font-awesome.min.css" />
  <link rel="stylesheet" href="/css/github.css" />
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400" type="text/css">
  <link rel="shortcut icon" href="/images/favicon.ico" />
  <link rel="apple-touch-icon" href="/images/apple-touch-icon.png" />
  
</head>
<body>
    <header class="global-header"  style="background-image:url( /images/bg.jpg )">
    <section class="header-text">
      <h1><a href="/">Gabriel Voelcker</a></h1>
      
      <div class="tag-line">
        A storage for works, projects and ideas.
      </div>
      
      <div class="sns-links hidden-print">
  
  <a href="#ZgotmplZ">
    <i class="fa fa-envelope"></i>
  </a>
  
  
  <a href="https://twitter.com/skyvoelcker" target="_blank">
    <i class="fa fa-twitter"></i>
  </a>
  
  
  
  
  
  <a href="https://github.com/gvoelcker" target="_blank">
    <i class="fa fa-github"></i>
  </a>
  
  
  
  
  
  <a href="https://stackoverflow.com/users/8661013" target="_blank">
    <i class="fa fa-stack-overflow"></i>
  </a>
  
  
  
</div>

      
      <a href="/" class="btn-header btn-back hidden-xs">
        <i class="fa fa-angle-left" aria-hidden="true"></i>
        &nbsp;Home
      </a>
      
      
    </section>
  </header>
  <main class="container">


<article>
  <header>
    <h1 class="text-primary">Introduction to Benford&#39;s Law basics</h1>
    <div class="post-meta clearfix">
    
      <div class="post-date pull-left">
        Posted on
        <time datetime="2018-08-10T00:00:00Z">
          Aug 10, 2018
        </time>
      </div>
    
      <div class="pull-right">
        
      </div>
    </div>
  </header>
  <section>
    <p>In 2016 I had the opportunity to take a class in my masters entitled Econophysics. Econophysics is a field of study that applies methods and theories developed by physicists to economic problems. Around that time I came across a very interesting phenomenon called Benford’s Law. This post is an introduction to Benford’s Law using RStudio. Let’s start by understanding what Benford’s Law is.</p>
<p>I am thinking of a number from 1 to 99. You have 2 seconds to guess which is the first <strong>digit</strong> of that number.</p>
<ol style="list-style-type: decimal">
<li></li>
<li></li>
</ol>
<p>Which number did you choose? Actually, that’s irrelevant! My intention here is to make you reflect on this question: what were the odds of you correctly guessing the first digit?</p>
<p>1/9, right? There were 9 possibilities(1,2,3,4,5,6,7,8,9), since 0 is not a first digit among the possibilities I’ve described. So, if you chose 4, in 11 of 99 possible outcomes you would’ve pick correctly (4,40,41,42,43,44,45,46,47,48,49). So far, simple math. This is illustrated by the figure below.</p>
<p><img src="/post/2018-08-10-benford-s-law-using-r_files/figure-html/Beta-1.png" width="672" /></p>
<p>But let me ask you now about a different set of numbers, say, the first 1000 occurrences of the Fibonacci sequence?(Any number of the Fibonacci sequence is the sum of the previous two numbers, so: 1,1,2,3,5,8,13… and so forth). Would you say that your odds of guessing correctly would remain 1/9 were you to choose 4 again? Let me show you the distribution.</p>
<p>PLOT 2ˆnˆ DISTRIBUTION HERE</p>
<pre class="r"><code>Base &lt;- read_excel(&quot;Fibonacci.xlsx&quot;, sheet=1, col_names = TRUE)</code></pre>
<p>The answer is no! What we have here is a very peculiar mathematical phenomenon called Benford’s Law. Thanks to two gentlemen, Simon Newcomb and Frank Benford, there’s a good story behind that answer. In <a href="http://gerry.lamost.org/upload/newcomb.pdf"><strong>1881</strong></a>, Simon Newcomb, an astronomer, noticed that the first pages of a logarithm book were usually more worned out than the later ones. From this, he derived his intuition that given a list of arbitrary numbers more numbers will tend to begin with an “1” than any other digit. So, why is it called Benford’s Law, and not Newcomb’s law? (that’s a classic case of <a href="https://io9.gizmodo.com/5820736/stiglers-law-why-nothing-in-science-is-ever-named-after-its-actual-discoverer"><strong>Stigler’s Law</strong></a>[and no, this law is named after this <a href="https://galton.uchicago.edu/faculty/stigler.shtml"><strong>Stigler</strong></a>, not his <a href="https://research.chicagobooth.edu/stigler/about/george-stigler"><strong>father</strong></a>, the economist and Nobel Laureate]).</p>
<p>Well, it wasn’t until <a href="https://www.jstor.org/stable/984802?seq=1#page_scan_tab_contents"><strong>1938</strong></a> that physicist Frank Benford formalized this discovery, which he regarded as the Law of Anomalous Numbers. He tested the distribution of the first digit of 20 different samples, and concluded that in populations of exponential growth, the distribution of the first digit followed a certain pattern. What is this pattern? If <strong>d</strong> is the first digit, with d(d E{1,2,…,9}), then:</p>
<p><span class="math display">\[P(d) = \log_{10}(d+1) - \log_{10}(d) = \log_{10}(\frac{d+1}{d}) = \log_{10}(\frac{d+1}{d})\]</span></p>
<p>Substituting d for the nine digits, we have the following results:</p>
<table>
<caption>
<span id="tab:tables-mtcars">Table 1: </span>Benford Distribution
</caption>
<thead>
<tr>
<th style="text-align:right;">
Digit
</th>
<th style="text-align:right;">
Distribution
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.301
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.176
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0.125
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
0.097
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.079
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
0.067
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
0.058
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
0.051
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
0.046
</td>
</tr>
</tbody>
</table>
<p>If we plot this distribution, we get:</p>
<p><img src="/post/2018-08-10-benford-s-law-using-r_files/figure-html/Benforddist-1.png" width="672" /></p>
<p>But, as one of my academics advisors used to always ask me, what is the purpose of this information? The beauty of Benford is how applicable this distribution is to different sets of numbers. In 1972, <a href="http://people.ischool.berkeley.edu/~hal/"><strong>Hal Varian</strong></a> suggested that the Benford distribution could be used to detect accounting frauds. The literature <a href="https://search.proquest.com/openview/7d019c616546c4c5da54cba2c85d136d/1?pq-origsite=gscholar&amp;cbl=31718"><strong>w</strong></a><a href="https://www.db-thueringen.de/servlets/MCRFileNodeServlet/dbt_derivate_00028759/ilm1-2013200266.pdf"><strong>o</strong></a><a href="http://jhr.uwpress.org/content/44/1/1.short"><strong>r</strong></a><a href="https://amstat.tandfonline.com/doi/abs/10.1198/000313007X223496"><strong>k</strong></a><a href="https://www.ams.org/journals/proc/1995-123-03/S0002-9939-1995-1233974-8/"><strong>s</strong></a> applied Benford’s distribution to investigate a variety of datasets.</p>
<p>Statistically speaking, when data should conform to Benford’s law, a null-hypothesis rejection suggests that some form of data manipulation has taken place. Now it is time to use R to test empirically Benford’s distribution.</p>
<p>There are two packages that can get the job done: <a href="https://cran.r-project.org/web/packages/BenfordTests/BenfordTests.pdf"><strong>BenfordTests</strong></a> and <a href="https://cran.r-project.org/web/packages/benford.analysis/benford.analysis.pdf"><strong>benford.analysis</strong></a>. Let’s go through to the basics together.</p>
<p>Let’s use this database, which uses the first 1000 instances of 2<sup>n</sup>. BenfordTests provides a series of test to see if your database conforms to Benford’s Law. For example, let’s use a Kolmogorov-Smirnov test:</p>
<pre class="r"><code>DataBenford &lt;- read_excel(&quot;dataBenford.xlsx&quot;, sheet=1, col_names = TRUE)
Test1 &lt;- as.numeric(DataBenford$First_Digit)
ks.benftest(Test1, digits = 1, pvalmethod = &quot;simulate&quot;)
## 
##  K-S Test for Benford Distribution
## 
## data:  Test1
## D = 0.060145, p-value = 1</code></pre>
<p>Or a Chi-Square test:</p>
<pre class="r"><code>library(BenfordTests)
chisq.benftest(Test1, digits = 1)
## 
##  Chi-Square Test for Benford Distribution
## 
## data:  Test1
## chisq = 0.15855, p-value = 1</code></pre>
<p>Or a Euclidean Distance test:</p>
<pre class="r"><code>library(BenfordTests)
edist.benftest(Test1, digits = 1)
## 
##  Euclidean Distance Test for Benford Distribution
## 
## data:  Test1
## d_star = 0.097619, p-value = 1</code></pre>
<p>Or a Hotelling T Square test:</p>
<pre class="r"><code>library(BenfordTests)
jointdigit.benftest(Test1, digits = 1)
## 
##  Joint Digits Test
## 
## data:  Test1
## Tsquare = 0.15855, p-value = 1</code></pre>
<p>As you can see, BenfordTests have a variety of tests that you can use to test Benford’s Law in set a of numbers. The most important part is to interpret them. But the packages contain more than just tests. It is possible to perform a graphical analysis of the first significant digits:</p>
<p>If you are a fan of math, there’s still a lot you can learn about Benford’s law <a href="http://mathworld.wolfram.com/BenfordsLaw.html"><strong>here</strong></a>.</p>

  </section>
  <footer>
    
    
    
    <section class="author-info row">
      <div class="author-avatar col-md-2">
        
      </div>
      <div class="author-meta col-md-6">
        
        
      </div>
      
      <div class="author-contact col-md-4">
        <a href="#ZgotmplZ">
          <i class="fa fa-envelope-o" aria-hidden="true"></i>
          &nbsp;Contact me
        </a>
      </div>
      
    </section>
    <ul class="pager">
      
      <li class="previous"><a href="/post/about/"><span aria-hidden="true">&larr;</span> Older</a></li>
      
      
      <li class="next disabled"><a href="#">Newer <span aria-hidden="true">&rarr;</span></a></li>
      
    </ul>
  </footer>
</article>

  </main>
  <footer class="container global-footer">
    <div class="copyright-note pull-left">
      &copy; Copyright notice
    </div>
    <div class="sns-links hidden-print">
  
  <a href="#ZgotmplZ">
    <i class="fa fa-envelope"></i>
  </a>
  
  
  <a href="https://twitter.com/skyvoelcker" target="_blank">
    <i class="fa fa-twitter"></i>
  </a>
  
  
  
  
  
  <a href="https://github.com/gvoelcker" target="_blank">
    <i class="fa fa-github"></i>
  </a>
  
  
  
  
  
  <a href="https://stackoverflow.com/users/8661013" target="_blank">
    <i class="fa fa-stack-overflow"></i>
  </a>
  
  
  
</div>

  </footer>

  <script src="/js/highlight.pack.js"></script>
  <script>
    hljs.initHighlightingOnLoad();
  </script>
  
  
</body>
</html>

